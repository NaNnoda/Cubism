{
  "version": 3,
  "sources": ["../Cubism/src/Utils/Math/Point.ts", "../Cubism/src/Utils/Math/TransformMatrix2D.ts", "../Cubism/src/Drawer/CubismCanvasState.ts", "../Cubism/src/CubismPart.ts", "../Cubism/src/Constants/EventKeys.ts", "../Cubism/src/Drawer/CanvasDrawer.ts", "../Cubism/src/Events/CubismEventSystem.ts", "../Cubism/src/Datatypes/PointerPoint.ts", "../Cubism/src/Global/Outer/CubismOuterGlobal.ts", "../Cubism/src/CubismElementManger.ts", "../Cubism/src/CubismEventManager.ts", "../Cubism/src/Cubism.ts", "../Cubism/src/Utils/Debug/DebugConsole.ts", "../Cubism/src/Constants/SizeKeys.ts", "../Cubism/src/Utils/Decorators/NeedsRedraw.ts", "../Cubism/src/Elements/Basic/CubismElement.ts", "../Cubism/src/Elements/Basic/CubismParentElement.ts", "../Cubism/src/Elements/Basic/PointerHanderParentElement.ts", "../Cubism/src/Constants/Colors.ts", "../Cubism/src/Utils/Physics/Physics2D/PhysicalPoint2D.ts", "../Cubism/src/Elements/Fancy/RecursiveRect.ts", "../Cubism/src/Elements/Fancy/ChangingRainbowBackground.ts", "../Cubism/src/Demo/CanvasRecorder.ts", "../Cubism/src/Demo/StaticDemo.ts", "../Cubism/src/Demo/DemoDecorators.ts", "../Cubism/src/Elements/Layouts/LayoutElement.ts", "../Cubism/src/Elements/Layouts/VerticalLayout.ts", "../Cubism/src/Theme/BasicTheme.ts", "../Cubism/src/Constants/ThemeKeys.ts", "../Cubism/src/Elements/Basic/ThemedElement.ts", "../Cubism/src/Elements/Basic/PointerInteractThemeElement.ts", "../Cubism/src/Elements/RectElement.ts", "../Cubism/src/Elements/CircleElement.ts", "../Cubism/src/Elements/Layouts/HorizontalLayout.ts", "../Cubism/src/Elements/Background.ts", "../Cubism/src/Theme/FontTheme.ts", "../Cubism/src/Elements/TextElement.ts", "../Cubism/src/Elements/ButtonElement.ts", "../Cubism/src/Elements/Icons/BasicIcon.ts", "../Cubism/src/Elements/Icons/CloseIcon.ts", "../Cubism/src/Elements/Icons/AddIcon.ts", "../Cubism/src/Elements/Icons/MaterialIcons.ts", "../Cubism/src/Elements/DraggableCircle.ts", "../Cubism/src/Utils/Math/NNMatrix.ts", "../Cubism/src/Curve/Curve2D/Cubic.ts", "../Cubism/src/Elements/CurveElement.ts", "../Cubism/src/Animation/Animation.ts", "../Cubism/src/Elements/Fancy/CurveCanvas.ts", "../Cubism/src/Demo/DemoFunctions.ts"],
  "sourcesContent": ["/**\r\n * A representation of a point in 2D space.\r\n */\r\nexport class Point2D implements IPoint2D {\r\n    arr: number[]\r\n\r\n    constructor(x: number, y: number) {\r\n        this.arr = [x, y];\r\n    }\r\n\r\n    static get zero() {\r\n        return new Point2D(0, 0);\r\n    }\r\n\r\n    static fromIPoint(i: IPoint2D) {\r\n        return new Point2D(i.x, i.y);\r\n    }\r\n\r\n    static fromArray(arr: number[]): Point2D {\r\n        return new Point2D(arr[0], arr[1]);\r\n    }\r\n\r\n    static fromNumber(n: number): Point2D {\r\n        return new Point2D(n, n);\r\n    }\r\n\r\n    static getRandom(min: number | null = null, max: number | null = null) {\r\n\r\n        if (max === null) {\r\n            if (min !== null) {\r\n                max = min;\r\n                min = 0;\r\n            } else {\r\n                max = 1;\r\n                min = 0;\r\n            }\r\n        }\r\n\r\n        min = min || 0;\r\n\r\n        return new Point2D(Math.random() * (max - min) + min, Math.random() * (max - min) + min);\r\n    }\r\n\r\n    get x() {\r\n        return this.arr[0];\r\n    }\r\n\r\n    set x(value: number) {\r\n        this.arr[0] = value;\r\n    }\r\n\r\n    get y() {\r\n        return this.arr[1];\r\n    }\r\n\r\n    set y(value: number) {\r\n        this.arr[1] = value;\r\n    }\r\n\r\n    clone(): Point2D {\r\n        return new Point2D(this.x, this.y);\r\n    }\r\n\r\n    setXY(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n\r\n    get max() {\r\n        return Math.max(this.x, this.y);\r\n    }\r\n\r\n    get min() {\r\n        return Math.min(this.x, this.y);\r\n    }\r\n\r\n    set(point: Point2D) {\r\n        this.x = point.x;\r\n        this.y = point.y;\r\n        return this;\r\n    }\r\n\r\n\r\n    /**\r\n     * Offset the point by the given amount.\r\n     * @param offset\r\n     */\r\n    offset(offset: Point2D) {\r\n        this.x += offset.x;\r\n        this.y += offset.y;\r\n        return this;\r\n    }\r\n\r\n    identity(): Point2D {\r\n\r\n        let rotation = Math.atan2(this.y, this.x);\r\n        // let length = this.euclideanDistance(Point2D.zero);\r\n\r\n        return new Point2D(Math.cos(rotation) , Math.sin(rotation) );\r\n    }\r\n\r\n    /**\r\n     * Offset the point by the negative given amount.\r\n     * @param offset\r\n     */\r\n    nOffset(offset: Point2D) {\r\n        this.x -= offset.x;\r\n        this.y -= offset.y;\r\n        return this;\r\n    }\r\n\r\n    add(other: Point2D): Point2D {\r\n        return this.clone().offset(other);\r\n    }\r\n\r\n    sub(other: Point2D): Point2D {\r\n        return this.clone().nOffset(other);\r\n    }\r\n\r\n    subXY(x: number, y: number): Point2D {\r\n        return this.sub(new Point2D(x, y));\r\n    }\r\n\r\n    mul(other: Point2D): Point2D {\r\n        return new Point2D(this.x * other.x, this.y * other.y);\r\n    }\r\n\r\n    scale(n: number): Point2D {\r\n        return new Point2D(this.x * n, this.y * n);\r\n    }\r\n\r\n    toString() {\r\n        return `[${this.x}, ${this.y}]`;\r\n    }\r\n\r\n    euclideanDistance(other: Point2D): number {\r\n        return Math.sqrt(Math.pow(this.x - other.x, 2) + Math.pow(this.y - other.y, 2));\r\n    }\r\n\r\n    manhattanDistance(other: Point2D): number {\r\n        return Math.abs(this.x - other.x) + Math.abs(this.y - other.y);\r\n    }\r\n\r\n    angleTo(other: Point2D): number {\r\n        return Math.atan2(other.y - this.y, other.x - this.x);\r\n    }\r\n}\r\n", "/**\r\n * A class representing a 2D transformation matrix.\r\n */\r\nimport {Point2D} from \"./Point\";\r\n\r\nexport class TransformMatrix2D {\r\n    arr: number[][] = [];\r\n\r\n    /**\r\n     * Creates a new 2D transform matrix.\r\n     * @param m11 Horizontal scaling. A value of 1 results in no scaling.\r\n     * @param m12 Vertical skewing.\r\n     * @param m21 Horizontal skewing.\r\n     * @param m22 Vertical scaling. A value of 1 results in no scaling.\r\n     * @param dx  Horizontal translation (moving).\r\n     * @param dy Vertical translation (moving).\r\n     */\r\n    constructor(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number) {\r\n        this.arr = [\r\n            [m11, m12, dx],\r\n            [m21, m22, dy],\r\n            [0, 0, 1]\r\n        ];\r\n    }\r\n    get m11(): number {\r\n        return this.arr[0][0];\r\n    }\r\n\r\n    set m11(value: number) {\r\n        this.arr[0][0] = value;\r\n    }\r\n\r\n    get m12(): number {\r\n        return this.arr[0][1];\r\n    }\r\n\r\n    set m12(value: number) {\r\n        this.arr[0][1] = value;\r\n    }\r\n\r\n    get m21(): number {\r\n        return this.arr[1][0];\r\n    }\r\n\r\n    set m21(value: number) {\r\n        this.arr[1][0] = value;\r\n    }\r\n\r\n    get m22(): number {\r\n        return this.arr[1][1];\r\n    }\r\n\r\n    set m22(value: number) {\r\n        this.arr[1][1] = value;\r\n    }\r\n\r\n    get dx(): number {\r\n        return this.arr[0][2];\r\n    }\r\n\r\n    set dx(value: number) {\r\n        this.arr[0][2] = value;\r\n    }\r\n\r\n    get dy(): number {\r\n        return this.arr[1][2];\r\n    }\r\n\r\n    set dy(value: number) {\r\n        this.arr[1][2] = value;\r\n    }\r\n\r\n\r\n    static makeFromArray(arr: number[][]): TransformMatrix2D {\r\n        return new TransformMatrix2D(arr[0][0], arr[0][1], arr[1][0], arr[1][1], arr[0][2], arr[1][2]);\r\n    }\r\n\r\n    get(x: number, y: number): number {\r\n        return this.arr[x][y];\r\n    }\r\n\r\n    set(x: number, y: number, value: number) {\r\n        // console.log(`Setting ${x}, ${y} to ${value}`);\r\n        this.arr[x][y] = value;\r\n    }\r\n\r\n    static identity(): TransformMatrix2D {\r\n        return new TransformMatrix2D(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    static zero(): TransformMatrix2D {\r\n        return new TransformMatrix2D(0, 0, 0, 0, 0, 0);\r\n    }\r\n\r\n    static translation(x: number, y: number): TransformMatrix2D {\r\n        return new TransformMatrix2D(1, 0, 0, 1, x, y);\r\n    }\r\n\r\n    static translationFromPoint(point: Point2D): TransformMatrix2D {\r\n        return TransformMatrix2D.translation(point.x, point.y);\r\n    }\r\n\r\n    static rotation(angle: number): TransformMatrix2D {\r\n        let cos = Math.cos(angle);\r\n        let sin = Math.sin(angle);\r\n        return new TransformMatrix2D(cos, -sin, sin, cos, 0, 0);\r\n    }\r\n\r\n    static scale(x: number, y: number): TransformMatrix2D {\r\n        return new TransformMatrix2D(x, 0, 0, y, 0, 0);\r\n    }\r\n    static scaleFromPoint(point: Point2D): TransformMatrix2D {\r\n        return TransformMatrix2D.scale(point.x, point.y);\r\n    }\r\n\r\n    clone(): TransformMatrix2D {\r\n        return new TransformMatrix2D(this.m11, this.m12, this.m21, this.m22, this.dx, this.dy);\r\n    }\r\n\r\n    multiply(other: TransformMatrix2D): TransformMatrix2D {\r\n        let newMatrix = TransformMatrix2D.zero();\r\n        for (let i = 0; i < 3; i++) {\r\n            for (let j = 0; j < 3; j++) {\r\n                let dotProduct = 0;\r\n                for (let k = 0; k < 3; k++) {\r\n                    dotProduct += this.get(i, k) * other.get(k, j);\r\n                }\r\n                newMatrix.set(i, j, dotProduct);\r\n            }\r\n        }\r\n        return newMatrix;\r\n    }\r\n\r\n    offsetXY(x: number, y: number): TransformMatrix2D {\r\n        return this.multiply(TransformMatrix2D.translation(x, y));\r\n    }\r\n    offsetPoint(point: Point2D): TransformMatrix2D {\r\n        return this.offsetXY(point.x, point.y);\r\n    }\r\n\r\n    rotate(angle: number): TransformMatrix2D {\r\n        return this.multiply(TransformMatrix2D.rotation(angle));\r\n    }\r\n\r\n    scale(x: number, y: number): TransformMatrix2D {\r\n        return this.multiply(TransformMatrix2D.scale(x, y));\r\n    }\r\n\r\n    toString(): string {\r\n        return `(${this.m11}, ${this.m12}, ${this.dx})\\n(${this.m21}, ${this.m22}, ${this.dy})`;\r\n    }\r\n}\r\n", "import {Point2D} from \"../Utils/Math/Point\";\r\nimport {TransformMatrix2D} from \"../Utils/Math/TransformMatrix2D\";\r\n\r\n/**\r\n * The state of the canvas\r\n */\r\nexport class CubismCanvasState {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    constructor(canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) {\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n    }\r\n\r\n    private translates: TransformMatrix2D[] = [TransformMatrix2D.identity()];\r\n\r\n    translate(translateMatrix: TransformMatrix2D) {\r\n        this.translates.push(translateMatrix);\r\n        this.setCtxTransform(translateMatrix);\r\n    }\r\n\r\n    offset(offset: Point2D) {\r\n        let translateMatrix = this.translateMatrix.clone().offsetPoint(offset);\r\n        this.translate(translateMatrix);\r\n    }\r\n\r\n    rotate(angle: number) {\r\n        let translateMatrix = this.translateMatrix.clone().rotate(angle);\r\n        this.translate(translateMatrix);\r\n    }\r\n\r\n    scale(scale: Point2D) {\r\n        let translateMatrix = this.translateMatrix.clone().scale(scale.x, scale.y);\r\n        this.translate(translateMatrix);\r\n    }\r\n\r\n    setCtxTransform(t: TransformMatrix2D) {\r\n        this.ctx.setTransform(t.m11, t.m12, t.m21, t.m22, t.dx, t.dy);\r\n    }\r\n\r\n    restoreTranslate() {\r\n        // console.log(`Restoring translate ${this.translates.length}`);\r\n        let lastTranslate = this.popTranslate();\r\n        this.setCtxTransform(lastTranslate);\r\n    }\r\n\r\n    get translateMatrix(): TransformMatrix2D {\r\n        return this.translates[this.translates.length - 1];\r\n    }\r\n\r\n    popTranslate(): TransformMatrix2D {\r\n        if (this.translates.length > 1) {\r\n            // console.log(\"pop translate\");\r\n            return this.translates.pop() as TransformMatrix2D;\r\n        }\r\n        return this.translates[0];\r\n    }\r\n\r\n    _needsRedraw: boolean = true;\r\n    get needsRedraw() {\r\n        return this._needsRedraw;\r\n    }\r\n\r\n    set needsRedraw(value: boolean) {\r\n        this._needsRedraw = value;\r\n    }\r\n}\r\n", "import IHasCubism from \"./Interface/IGlobalHandler\";\r\nimport {Cubism} from \"./Cubism\";\r\n\r\nexport default class CubismPart implements IHasCubism {\r\n    _cubism: Cubism | null = null;\r\n    get cubism(): Cubism {\r\n        return this.getCubism();\r\n    }\r\n    /**\r\n     * It seems like setter has some problems with overriding\r\n     * @param cubism\r\n     */\r\n    set cubism(cubism: Cubism) {\r\n        this.setCubism(cubism);\r\n    }\r\n\r\n    /**\r\n     * Called by setter\r\n     * @param cubism\r\n     */\r\n    setCubism(cubism: Cubism) {\r\n        this._cubism = cubism;\r\n    }\r\n\r\n    /**\r\n     * Called by getter\r\n     */\r\n    getCubism(): Cubism {\r\n        if (this._cubism === null) {\r\n            throw new Error(`Cubism is not set for ${this.className}`);\r\n        }\r\n        return this._cubism as Cubism;\r\n    }\r\n\r\n    get className(): string {\r\n        return this.constructor.name;\r\n    }\r\n\r\n    toString(): string {\r\n        return `${this.className}(${(this._cubism ===null) ? this._cubism : \"NO CUBISM\"})`;\r\n    }\r\n}", "\r\nexport class EventKeys {\r\n    public static readonly ON_MOVE = \"onMove\";\r\n    public static readonly ON_DOWN = \"onDown\";\r\n    public static readonly ON_UP = \"onUp\";\r\n\r\n    public static readonly GLOBAL_ON_POINTER_CHANGE = \"redraw\";\r\n\r\n    public static readonly FPS_UPDATE = \"FPS_EVENT\";\r\n\r\n    public static readonly ON_POINTER_EVENT = \"onPointerEvent\";\r\n\r\n    public static readonly ON_CLICK = \"onClick\";\r\n    public static readonly ON_DOUBLE_CLICK = \"onDoubleClick\";\r\n    public static readonly ON_DRAG = \"onDrag\";\r\n    public static readonly ON_DRAG_START = \"onDragStart\";\r\n    public static readonly ON_DRAG_END = \"onDragEnd\";\r\n    public static readonly ON_DRAG_ENTER = \"onDragEnter\";\r\n    public static readonly ON_DRAG_LEAVE = \"onDragLeave\";\r\n    public static readonly ON_DRAG_OVER = \"onDragOver\";\r\n    public static readonly ON_DROP = \"onDrop\";\r\n    public static readonly ON_PARENT_MOVE = \"onParentMove\";\r\n    public static readonly ON_PARENT_DOWN = \"onParentDown\";\r\n    public static readonly ON_PARENT_UP = \"onParentUp\";\r\n    public static readonly ON_PARENT_CLICK = \"onParentClick\";\r\n    public static readonly ON_ENTER = \"onEnter\";\r\n    public static readonly ON_LEAVE = \"onLeave\";\r\n\r\n    public static readonly FRAME_UPDATE = \"onFrameUpdate\";\r\n    public static readonly FIX_UPDATE = \"onFixUpdate\";\r\n    public static readonly REDRAW = \"onRedraw\";\r\n\r\n    public static readonly POINTER_DOWN = \"onMouseDown\";\r\n    public static readonly POINTER_UP = \"onMouseUp\";\r\n    public static readonly POINTER_MOVE = \"onMouseMove\";\r\n\r\n    public static readonly SECOND_UPDATE = \"onSecondUpdate\";\r\n    public static readonly MINUTE_UPDATE = \"onMinuteUpdate\";\r\n    public static readonly HOUR_UPDATE = \"onHourUpdate\";\r\n\r\n    public static readonly DRAW_COUNT_UPDATE = \"onDrawCountUpdate\";\r\n}\r\n", "import {Point2D} from \"../Utils/Math/Point\";\r\nimport {CubismCanvasState} from \"./CubismCanvasState\";\r\nimport CubismPart from \"../CubismPart\";\r\nimport {Cubism} from \"../Cubism\";\r\nimport {EventKeys} from \"../Constants/EventKeys\";\r\n\r\n/**\r\n * Adaptor class for the canvas\r\n * with the ability to draw on it\r\n * and handle events\r\n */\r\nexport class CanvasDrawer extends CubismPart {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    get eventSystem() {\r\n        return this.cubism.eventSystem;\r\n    }\r\n\r\n    state: CubismCanvasState; // the state of the canvas\r\n\r\n    /**\r\n     * Constructor of the CanvasDrawer\r\n     * @param canvas the canvas to draw on\r\n     */\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        super();\r\n        this.canvas = canvas;\r\n        this.ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n        this.state = new CubismCanvasState(canvas, this.ctx);\r\n    }\r\n\r\n    setCubism(cubism: Cubism) {\r\n        super.setCubism(cubism);\r\n\r\n        this.registerFrameUpdate();\r\n    }\r\n\r\n    get width() {\r\n        return this.canvas.width;\r\n    }\r\n\r\n    set width(width: number) {\r\n        this.canvas.width = width;\r\n    }\r\n\r\n    get height() {\r\n        return this.canvas.height;\r\n    }\r\n\r\n    set height(height: number) {\r\n        this.canvas.height = height;\r\n    }\r\n\r\n    /**\r\n     * Register the frame update event\r\n     * @private\r\n     */\r\n    private registerFrameUpdate() {\r\n        // console.log(\"Registering frame update\");\r\n        this.eventSystem.registerEvent(EventKeys.FRAME_UPDATE, this.frameUpdate.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Things to do on every frame update\r\n     * @private\r\n     */\r\n    private frameUpdate() {\r\n        // console.log(\"Frame update\");\r\n        if (this.state.needsRedraw) {\r\n            this.triggerRedraw();\r\n            // console.log(\"Redrawing\");\r\n            this.state.needsRedraw = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear the canvas\r\n     */\r\n    clear() {\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.canvas.width = this.cubism.width;\r\n    }\r\n\r\n    /**\r\n     * Set the fill style(color) of the canvas\r\n     * @param style the style to set\r\n     */\r\n    setFillStyle(style: string) {\r\n        this.ctx.fillStyle = style;\r\n    }\r\n\r\n    /**\r\n     * Set the stroke style(color) of the canvas\r\n     * @param style the style to set\r\n     */\r\n    setStrokeStyle(style: string) {\r\n        this.ctx.strokeStyle = style;\r\n    }\r\n\r\n    /**\r\n     * Set the line width of the canvas\r\n     * @param width\r\n     */\r\n    setStrokeWidth(width: number) {\r\n        this.ctx.lineWidth = width;\r\n    }\r\n\r\n    /**\r\n     * Translate the canvas\r\n     * @param offset\r\n     */\r\n    offset(offset: Point2D) {\r\n        this.state.offset(offset);\r\n    }\r\n\r\n    offsetXY(x: number, y: number) {\r\n        this.state.offset(new Point2D(x, y));\r\n    }\r\n\r\n    rotate(angle: number) {\r\n        this.state.rotate(angle);\r\n    }\r\n\r\n    scale(scale: Point2D | number) {\r\n        if (typeof scale === \"number\") {\r\n            scale = Point2D.fromNumber(scale);\r\n        }\r\n        this.state.scale(scale);\r\n    }\r\n\r\n\r\n    /**\r\n     * Restore translation and rotation to previous state\r\n     */\r\n    restoreTranslate() {\r\n        this.state.restoreTranslate();\r\n    }\r\n\r\n    /**\r\n     * Draw text on the canvas\r\n     * @param text the text to draw\r\n     * @param x the x position of the text\r\n     * @param y the y position of the text\r\n     */\r\n    fillText(text: string, x: number, y: number) {\r\n        this.ctx.fillText(text, x, y);\r\n    }\r\n\r\n    /**\r\n     * Draw a line with two Point2Ds\r\n     * @param begin the beginning of the line\r\n     * @param end the end of the line\r\n     */\r\n    drawLineWithPoints(begin: IPoint2D, end: IPoint2D) {\r\n        this.drawLine(begin.x, begin.y, end.x, end.y);\r\n    }\r\n\r\n    /**\r\n     * Draw a line with four numbers\r\n     * @param beginX the x position of the beginning of the line\r\n     * @param beginY the y position of the beginning of the line\r\n     * @param endX the x position of the end of the line\r\n     * @param endY the y position of the end of the line\r\n     */\r\n    drawLine(beginX: number, beginY: number, endX: number, endY: number) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(beginX, beginY);\r\n        this.ctx.lineTo(endX, endY);\r\n        this.closeDraw();\r\n    }\r\n\r\n    drawCircle(x: number, y: number, radius: number) {\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(x, y, radius, 0, 2 * Math.PI);\r\n        this.closeDraw();\r\n    }\r\n\r\n    drawPoint(point: IPoint2D, radius: number = 5) {\r\n        this.drawCircle(point.x, point.y, radius);\r\n    }\r\n\r\n\r\n    drawShape(points: IPoint2D[]) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(points[0].x, points[0].y);\r\n        for (let i = 1; i < points.length; i++) {\r\n            this.ctx.lineTo(points[i].x, points[i].y);\r\n        }\r\n        this.closeDraw();\r\n    }\r\n\r\n    drawRectWithPoints(p1: IPoint2D, p2: IPoint2D | null = null) {\r\n        if (p2 === null) {\r\n            this.drawRect(0, 0, p1.x, p1.y);\r\n        } else {\r\n            this.drawRect(p1.x, p1.y, p2.x, p2.y);\r\n        }\r\n    }\r\n\r\n    drawRect(x: number, y: number, width: number, height: number) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(x, y);\r\n        this.ctx.lineTo(width, y);\r\n        this.ctx.lineTo(width, height);\r\n        this.ctx.lineTo(x, height);\r\n        this.closeDraw();\r\n    }\r\n\r\n    drawPathString(path: string) {\r\n        this.drawPath(new Path2D(path));\r\n    }\r\n\r\n    /**\r\n     * Draw an HTML Canvas Path on the canvas\r\n     * @param path\r\n     */\r\n    drawPath(path: Path2D) {\r\n        this.ctx.stroke(path);\r\n    }\r\n\r\n    /**\r\n     * Close the drawing path\r\n     */\r\n    closeDraw() {\r\n        this.ctx.closePath();\r\n        this.ctx.fill();\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    /**\r\n     * Set the font of the canvas\r\n     * @param font\r\n     */\r\n    setFont(font: string) {\r\n        this.ctx.font = font;\r\n    }\r\n\r\n    /**\r\n     * Set the need redraw flag\r\n     * @param redraw\r\n     */\r\n    setRedraw(redraw: boolean) {\r\n        this.state.needsRedraw = redraw;\r\n    }\r\n\r\n    measureText(text: string) {\r\n        return this.ctx.measureText(text);\r\n    }\r\n\r\n    /**\r\n     * Trigger a redraw event\r\n     * Seems more responsive than setRedraw()\r\n     */\r\n    triggerRedraw() {\r\n        this.eventSystem.triggerEvent(EventKeys.REDRAW);\r\n    }\r\n\r\n    drawSVG(svg: string) {\r\n        const img = new Image();\r\n        img.src = \"data:image/svg+xml;base64,\" + btoa(svg);\r\n        this.ctx.drawImage(img, 0, 0);\r\n    }\r\n\r\n    drawImage(image: HTMLImageElement, x: number = 0, y: number = 0, width: number = 0, height: number = 0) {\r\n        this.ctx.drawImage(image, x, y, width, height);\r\n    }\r\n\r\n    drawArrow(pos: Point2D, rotation: number, length: number=10) {\r\n        this.offset(pos);\r\n        this.rotate(rotation);\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(0, 0);\r\n        this.ctx.lineTo(length, 0);\r\n        this.ctx.lineTo(length - 5, -5);\r\n        this.ctx.moveTo(length, 0);\r\n        this.ctx.lineTo(length - 5, 5);\r\n        this.restoreTranslate();\r\n        this.restoreTranslate();\r\n        this.closeDraw();\r\n        // this.restoreTranslate();\r\n        // this.restoreTranslate();\r\n        // this.restoreTranslate();\r\n    }\r\n}\r\n", "import IHasCubism from \"../Interface/IGlobalHandler\";\r\nimport CubismPart from \"../CubismPart\";\r\nimport IEventManger from \"../Interface/IEventManger\";\r\n\r\n/**\r\n * System that handles the registration and trigger of global events\r\n */\r\nexport class CubismEventSystem extends CubismPart implements IEventManger {\r\n    private _globalEventListeners: { [key: string]: Function[] } = {};\r\n\r\n    getEvent(event: string): Function[] {\r\n        if (this._globalEventListeners[event] === undefined) {\r\n            this._globalEventListeners[event] = [];\r\n            this._globalEventListeners[event].push(() => {\r\n                // Log.logDebug(`Event ${event} triggered`);\r\n            });\r\n        }\r\n        return this._globalEventListeners[event];\r\n    }\r\n\r\n    registerEvent(eventKey: string, callback: Function): void {\r\n        this.getEvent(eventKey).push(callback);\r\n    }\r\n\r\n    triggerEvent(eventKey: string, ...args: any[]): void {\r\n        this.getEvent(eventKey).forEach((callback) => {\r\n            callback(...args);\r\n        });\r\n    }\r\n\r\n    unregisterEvent(eventKey: string, callback: Function): void {\r\n        this._globalEventListeners[eventKey].splice(this._globalEventListeners[eventKey].indexOf(callback), 1);\r\n    }\r\n\r\n    removeEvent(event: string) {\r\n        this._globalEventListeners[event] = [];\r\n    }\r\n\r\n    removeAllEvents() {\r\n        for (const event in this._globalEventListeners) {\r\n            this.removeEvent(event);\r\n        }\r\n        this._globalEventListeners = {};\r\n    }\r\n\r\n    hasEvent(event: string): boolean {\r\n        return this._globalEventListeners[event] !== undefined;\r\n    }\r\n}\r\n", "import {Point2D} from \"../Utils/Math/Point\";\r\n\r\nexport class PointerPoint extends Point2D {\r\n\r\n    constructor(x: number, y: number, public pressure: number) {\r\n        super(x, y);\r\n    }\r\n\r\n    static createFromPointerEvent(e: PointerEvent): PointerPoint {\r\n        return new PointerPoint(e.offsetX, e.offsetY, e.pressure);\r\n    }\r\n\r\n    toString(): string {\r\n        return `(x:${this.x}, y:${this.y}, p:${this.pressure})`;\r\n    }\r\n\r\n    sub(other: Point2D): PointerPoint {\r\n        return new PointerPoint(this.x - other.x, this.y - other.y, this.pressure);\r\n    }\r\n\r\n    get pressed(): boolean {\r\n        return this.pressure > 0;\r\n    }\r\n}\r\n", "import {CubismEventSystem} from \"../../Events/CubismEventSystem\";\r\nimport {Cubism} from \"../../Cubism\";\r\n\r\n/**\r\n * The global manager for Cubism outside the canvas\r\n * This is a singleton class\r\n */\r\nexport class CubismOuterGlobal {\r\n    private static _instance: CubismOuterGlobal;\r\n\r\n    private constructor() {\r\n    }\r\n\r\n    public static get instance(): CubismOuterGlobal {\r\n        if (!CubismOuterGlobal._instance) {\r\n            CubismOuterGlobal._instance = new CubismOuterGlobal();\r\n        }\r\n        return CubismOuterGlobal._instance;\r\n    }\r\n\r\n    private _cubismInstances: { [key: string]: Cubism } = {};\r\n\r\n    public static getCubismInstance(key: string): Cubism {\r\n        return CubismOuterGlobal.instance._cubismInstances[key];\r\n    }\r\n\r\n    public static registerCubismInstance(key: string, app: Cubism) {\r\n        if (CubismOuterGlobal.instance._cubismInstances[key] === undefined) {\r\n            CubismOuterGlobal.instance._cubismInstances[key] = app;\r\n        } else {\r\n            console.log(\"Replacing cubism instance with key \" + key);\r\n            this.getCubismInstance(key).destroy();\r\n            CubismOuterGlobal.instance._cubismInstances[key] = app;\r\n            // throw new Error(\"Cubism app with key [\" + key + \"] already exists\");\r\n        }\r\n    }\r\n}", "import {CubismElement} from \"./Elements/Basic/CubismElement\";\r\n\r\nexport default class CubismElementManger{\r\n\r\n    private _elementsWithId: { [key: string]: CubismElement } = {};\r\n\r\n    private _elementsWithClass: { [key: string]: CubismElement[] } = {};\r\n\r\n    public registerElementId(id: string, element: CubismElement) {\r\n        console.log(\"registering element with id \" + id);\r\n        if (this._elementsWithId[id] === undefined) {\r\n            this._elementsWithId[id] = element;\r\n        } else {\r\n            throw new Error(\"Element with that id already exists\");\r\n        }\r\n    }\r\n\r\n    public getElementById(id: string): CubismElement {\r\n        return this._elementsWithId[id];\r\n    }\r\n\r\n    public removeElementWithId(id: string) {\r\n        delete this._elementsWithId[id];\r\n    }\r\n\r\n    public registerElementClass(className: string, element: CubismElement) {\r\n        if (this._elementsWithClass[className] === undefined) {\r\n            this._elementsWithClass[className] = [];\r\n        }\r\n        this._elementsWithClass[className].push(element);\r\n    }\r\n\r\n    public getElementsByClass(className: string): CubismElement[] {\r\n        return this._elementsWithClass[className];\r\n    }\r\n\r\n    public removeElementWithClass(className: string, element: CubismElement) {\r\n        this._elementsWithClass[className].splice(this._elementsWithClass[className].indexOf(element), 1);\r\n    }\r\n\r\n    public removeClass(className: string) {\r\n        delete this._elementsWithClass[className];\r\n    }\r\n}", "import {CubismEventSystem} from \"./Events/CubismEventSystem\";\r\nimport IGlobalHandler from \"./Interface/IGlobalHandler\";\r\nimport IHasCubism from \"./Interface/IGlobalHandler\";\r\nimport CubismPart from \"./CubismPart\";\r\nimport {triggerAsyncId} from \"async_hooks\";\r\nimport {EventKeys} from \"./Constants/EventKeys\";\r\n\r\nexport default class CubismEventManager extends CubismPart {\r\n    get eventSystem(): CubismEventSystem {\r\n        return this.cubism.eventSystem;\r\n    }\r\n\r\n    /**\r\n     * Initialize a fix update\r\n     * @param timeInterval\r\n     */\r\n    initializeFixedUpdate(timeInterval: number = 1000 / 60) {\r\n        setInterval(this.doFixUpdate.bind(this), timeInterval);\r\n        return this;\r\n    }\r\n\r\n    doFixUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.FIX_UPDATE);\r\n    }\r\n\r\n    /**\r\n     * Initialize the frame update\r\n     */\r\n    public initializeFrameUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.FRAME_UPDATE);\r\n        window.requestAnimationFrame(this.doFrameUpdate.bind(this));\r\n        return this;\r\n    }\r\n\r\n    doFrameUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.FRAME_UPDATE);\r\n        window.requestAnimationFrame(this.doFrameUpdate.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Initialize the second update\r\n     */\r\n    public initializeSecondUpdate() {\r\n        setInterval(this.triggerSecondUpdate.bind(this), 1000);\r\n        return this;\r\n    }\r\n\r\n    triggerSecondUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.SECOND_UPDATE);\r\n    }\r\n\r\n    /**\r\n     * Initialize the FPS counter\r\n     */\r\n    public initializeFPSCounter() {\r\n        if (!this.eventSystem.hasEvent(EventKeys.SECOND_UPDATE)) {\r\n            this.initializeSecondUpdate();\r\n        }\r\n        if (!this.eventSystem.hasEvent(EventKeys.FRAME_UPDATE)) {\r\n            this.initializeFrameUpdate();\r\n        }\r\n        this.eventSystem.registerEvent(EventKeys.SECOND_UPDATE, this.triggerFPSUpdate.bind(this));\r\n        this.eventSystem.registerEvent(EventKeys.FRAME_UPDATE, this.incrementFrameCount.bind(this));\r\n        return this;\r\n    }\r\n\r\n    frameCount: number = 0;\r\n\r\n    triggerFPSUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.FPS_UPDATE, this.frameCount);\r\n        this.frameCount = 0;\r\n    }\r\n\r\n    incrementFrameCount() {\r\n        this.frameCount++;\r\n    }\r\n\r\n    /**\r\n     * Update canvas every frame\r\n     */\r\n    public initializeAlwaysRedraw() {\r\n        this.eventSystem.registerEvent(EventKeys.FRAME_UPDATE, this.triggerRedraw.bind(this));\r\n        return this;\r\n    }\r\n\r\n    triggerRedraw() {\r\n        this.eventSystem.triggerEvent(EventKeys.REDRAW);\r\n    }\r\n\r\n    /**\r\n     * Stop always redraw\r\n     */\r\n    public stopAlwaysRedraw() {\r\n        this.eventSystem.unregisterEvent(EventKeys.FRAME_UPDATE, this.triggerRedraw.bind(this));\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Initialize the draw count counter\r\n     */\r\n    public initializeDrawsPerSecondCounter() {\r\n        this.eventSystem.registerEvent(EventKeys.REDRAW, this.onRedraw.bind(this));\r\n        if (!this.eventSystem.hasEvent(EventKeys.SECOND_UPDATE)) {\r\n            this.initializeSecondUpdate();\r\n        }\r\n        this.eventSystem.registerEvent(EventKeys.SECOND_UPDATE, this.doDrawCountUpdate.bind(this));\r\n        return this;\r\n    }\r\n\r\n    drawCount: number = 0;\r\n\r\n    onRedraw() {\r\n        this.drawCount++;\r\n    }\r\n\r\n    doDrawCountUpdate() {\r\n        this.eventSystem.triggerEvent(EventKeys.DRAW_COUNT_UPDATE, this.drawCount);\r\n        this.drawCount = 0;\r\n    }\r\n}\r\n", "import {CanvasDrawer} from \"./Drawer/CanvasDrawer\";\r\nimport {CubismEventSystem} from \"./Events/CubismEventSystem\";\r\nimport {EventKeys} from \"./Constants/EventKeys\";\r\nimport {Point2D} from \"./Utils/Math/Point\";\r\nimport {PointerPoint} from \"./Datatypes/PointerPoint\";\r\nimport {CubismOuterGlobal} from \"./Global/Outer/CubismOuterGlobal\";\r\nimport CubismPart from \"./CubismPart\";\r\nimport CubismElementManger from \"./CubismElementManger\";\r\nimport {CubismElement} from \"./Elements/Basic/CubismElement\";\r\nimport CubismEventManager from \"./CubismEventManager\";\r\n\r\n/**\r\n * Entry point of the application\r\n * Initializes different parts of the application\r\n */\r\nexport class Cubism extends CubismElementManger {\r\n    _root: CubismElement | null = null;\r\n    readonly canvas: HTMLCanvasElement;\r\n    readonly cubismId: string;\r\n    readonly canvasDrawer: CanvasDrawer;\r\n    readonly eventSystem: CubismEventSystem;\r\n\r\n    get width() {\r\n        return this.canvas.width;\r\n    }\r\n    set width(width: number) {\r\n        this.canvas.width = width;\r\n    }\r\n    get height() {\r\n        return this.canvas.height;\r\n    }\r\n    set height(height: number) {\r\n        this.canvas.height = height;\r\n    }\r\n\r\n    _initializer: CubismEventManager;\r\n    get initializer() {\r\n        return this._initializer;\r\n    }\r\n\r\n    get rootElement(): CubismElement {\r\n        if (this._root === null) {\r\n            throw new Error(\"Root is not set\");\r\n        }\r\n        return this._root;\r\n    }\r\n\r\n    set rootElement(root) {\r\n\r\n        this.initParts(root);\r\n        this._root = root;\r\n    }\r\n\r\n\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        super();\r\n        this.canvas = canvas;\r\n        this.eventSystem = new CubismEventSystem();\r\n        this.canvasDrawer = new CanvasDrawer(canvas);\r\n        this._initializer = new CubismEventManager();\r\n\r\n        this.initParts(this.canvasDrawer, this.eventSystem, this.initializer);\r\n        this.registerRedraw();\r\n        this.registerGlobalPointerEvents();\r\n\r\n\r\n        if (canvas.id === null || canvas.id === undefined || canvas.id === \"\") {\r\n            throw new Error(\"Canvas must have an id\");\r\n        }\r\n        this.cubismId = canvas.id;\r\n\r\n        CubismOuterGlobal.registerCubismInstance(this.cubismId, this);\r\n    }\r\n\r\n\r\n    /**\r\n     * Register pointer events\r\n     */\r\n    registerGlobalPointerEvents() {\r\n        // on move\r\n        this.canvas.onpointermove = (e) => {\r\n            // console.log(\"onpointermove\");\r\n            this.eventSystem.triggerEvent(EventKeys.ON_POINTER_EVENT, new PointerPoint(e.offsetX, e.offsetY, e.pressure));\r\n        }\r\n        // on down\r\n        this.canvas.onpointerdown = (e) => {\r\n            this.eventSystem.triggerEvent(EventKeys.ON_POINTER_EVENT, new PointerPoint(e.offsetX, e.offsetY, e.pressure));\r\n        }\r\n        // on up\r\n        this.canvas.onpointerup = (e) => {\r\n            this.eventSystem.triggerEvent(EventKeys.ON_POINTER_EVENT, new PointerPoint(e.offsetX, e.offsetY, e.pressure));\r\n        }\r\n    }\r\n\r\n    registerRootElementPointerEvents() {\r\n\r\n        this.eventSystem.registerEvent(EventKeys.ON_POINTER_EVENT, (point: PointerPoint) => {\r\n            // console.log(`Pointer event [${point}]`);\r\n            this.rootElement.triggerEvent(EventKeys.ON_POINTER_EVENT, point);\r\n        });\r\n\r\n    }\r\n\r\n    registerRedraw() {\r\n        this.eventSystem.registerEvent(EventKeys.REDRAW, this.redraw.bind(this));\r\n    }\r\n\r\n    // registerOnMove() {\r\n    //     this.eventSystem.registerEvent(EventKeys.ON_MOVE, this.registerOnMove.bind(this));\r\n    // }\r\n\r\n    /**\r\n     * Create a new Cubism object from a canvas object\r\n     * @param canvas the canvas to draw on\r\n     */\r\n    static createFromCanvas(canvas: HTMLCanvasElement) {\r\n        return new Cubism(canvas);\r\n    }\r\n\r\n    /**\r\n     * Create a new Cubism object from a canvas id\r\n     * @param id the id of the canvas\r\n     */\r\n    static createFromId(id: string) {\r\n        return Cubism.createFromCanvas(document.getElementById(id) as HTMLCanvasElement);\r\n    }\r\n\r\n    init(root: CubismElement) {\r\n        this.rootElement = root;\r\n        this.initRootElement();\r\n        this.initializer.initializeFrameUpdate();\r\n\r\n        this.registerRootElementPointerEvents();\r\n        this.canvasDrawer.setRedraw(true);\r\n    }\r\n\r\n    private initRootElement() {\r\n        console.log(\"init root element\");\r\n        this.rootElement.resize(\r\n            new Point2D(this.canvas.width, this.canvas.height)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Redraw the whole canvas from the root element\r\n     */\r\n    redraw() {\r\n        // console.log(\"Redrawing\");\r\n        this.canvasDrawer.clear();\r\n        if (this.rootElement) {\r\n            this.rootElement.draw();\r\n        }\r\n    }\r\n\r\n    initParts(...parts: CubismPart[]) {\r\n        parts.forEach(part => {\r\n                part.cubism = this;\r\n                // console.log(`Initializing cubism part [${part}]`);\r\n            }\r\n        );\r\n    }\r\n\r\n    destroy() {\r\n        console.log(`Destroying [${this}]`);\r\n        this.eventSystem.removeAllEvents();\r\n\r\n        this.canvasDrawer.clear();\r\n    }\r\n\r\n    toString() {\r\n        return `Cubism [${this.cubismId}]`;\r\n    }\r\n}\r\n\r\n", "import { Point2D } from \"../Math/Point\";\r\nimport {CubismOuterGlobal} from \"../../Global/Outer/CubismOuterGlobal\";\r\n\r\nexport function initConsole() {\r\n    let w = window as any;\r\n    w.test = () => {\r\n        console.log('test');\r\n    }\r\n    w.cubismGlobal = CubismOuterGlobal.instance;\r\n    w.root = CubismOuterGlobal.getCubismInstance(\"mainCanvas\").rootElement;\r\n}\r\n", "export default class SizeKeys {\r\n    public static readonly DEFAULT_PADDING = 10;\r\n    public static readonly DEFAULT_MARGIN = 10;\r\n    public static readonly DEFAULT_BORDER = 1;\r\n\r\n    public static readonly MATCH_PARENT = -1;\r\n}", "import CubismPart from \"../../CubismPart\";\r\n\r\n/**\r\n * A decorator that trys to redraw the canvas after the accessor is called.\r\n * @param needsRedrawGet if true, the getter will be decorated\r\n * @param needsRedrawSet if true, the setter will be decorated\r\n */\r\nexport function needsRedrawAccessor(needsRedrawGet = false, needsRedrawSet = true) {\r\n    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n        if (descriptor) {\r\n            if (descriptor.set && needsRedrawSet) {\r\n                // console.log(\"descriptor.set is:\");\r\n                // console.log(descriptor.set);\r\n                let oldSet = descriptor.set;\r\n                descriptor.set = function (value: any) {\r\n                    oldSet.call(this, value);\r\n                    setRedrawHelper(this);\r\n                }\r\n            }\r\n            if (descriptor.get && needsRedrawGet) {\r\n                let oldGet = descriptor.get;\r\n                descriptor.get = function () {\r\n                    setRedrawHelper(this);\r\n                    return oldGet.call(this);\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction setRedrawHelper(descriptor: any) {\r\n    if (descriptor instanceof CubismPart) {\r\n        if (descriptor._cubism) {\r\n            descriptor._cubism.canvasDrawer.setRedraw(true);\r\n        }\r\n    } else {\r\n        console.log(\"this is not a CubismPart\");\r\n        throw new Error(\"this is not a CubismPart\");\r\n    }\r\n}", "import {Point2D} from \"../../Utils/Math/Point\";\r\nimport {CanvasDrawer} from \"../../Drawer/CanvasDrawer\";\r\nimport {Cubism} from \"../../Cubism\";\r\nimport {CubismEventSystem} from \"../../Events/CubismEventSystem\";\r\nimport SizeKeys from \"../../Constants/SizeKeys\";\r\nimport {needsRedrawAccessor} from \"../../Utils/Decorators/NeedsRedraw\";\r\n\r\n/**\r\n * Base class for all elements that can be rendered on the canvas\r\n * With size, position, and global events\r\n */\r\nexport class CubismElement extends CubismEventSystem implements IDrawable {\r\n    _position: Point2D = new Point2D(0, 0);\r\n    _size: Point2D = new Point2D(SizeKeys.MATCH_PARENT, SizeKeys.MATCH_PARENT);\r\n    _absSize: Point2D = new Point2D(0, 0); // Absolute size is the size of the element\r\n    _anchor: Point2D = new Point2D(0, 0);\r\n\r\n\r\n    elementId: string | null = null;\r\n    needsResize: boolean = true;\r\n\r\n    constructor(elementId: string | null = null) {\r\n        super();\r\n        // Optional id\r\n        this.elementId = elementId;\r\n        this.onCreate();\r\n    }\r\n\r\n    onCreate(): void {\r\n\r\n    }\r\n\r\n\r\n    get anchor(): Point2D {\r\n        return this._anchor;\r\n    }\r\n\r\n    @needsRedrawAccessor()\r\n    set anchor(anchor: Point2D) {\r\n        this._anchor = anchor;\r\n    }\r\n\r\n    /**\r\n     * Set id for this element so that it can be accessed by the id\r\n     * @param id\r\n     */\r\n    setId(id: string): this {\r\n        this.elementId = id;\r\n        if (this._cubism) {\r\n            this._cubism.registerElementId(id, this);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set cubism instance for this element\r\n     * @param cubism\r\n     */\r\n    setCubism(cubism: Cubism): void {\r\n        super.setCubism(cubism);\r\n        if (this.elementId !== null) {\r\n            this.setId(this.elementId);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set position of this element relative to parent\r\n     * @param pos\r\n     */\r\n    @needsRedrawAccessor()\r\n    set position(pos: Point2D) {\r\n        this._position = pos;\r\n        // this.c.setRedraw(true);\r\n    }\r\n\r\n    /**\r\n     * Get position of this element relative to parent\r\n     */\r\n    get position(): Point2D {\r\n        return this._position;\r\n    }\r\n\r\n    /**\r\n     * Get a size description of this element\r\n     * Not necessarily the size of the element\r\n     */\r\n\r\n    get size(): Point2D {\r\n        return this._size;\r\n    }\r\n\r\n    /**\r\n     * Set size of this element\r\n     *\r\n     * @param size size description\r\n     */\r\n    set size(size: Point2D) {\r\n        this.setSizeFromXY(size.x, size.y);\r\n    }\r\n\r\n    setSizeFromXY(x: number, y: number): this {\r\n        this.size.x = x;\r\n        this.size.y = y;\r\n        this.needsResize = true;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Get the actual size of this element\r\n     */\r\n    get absSize(): Point2D {\r\n        return this._absSize;\r\n    }\r\n\r\n    /**\r\n     * Set the actual size of this element\r\n     * @param size\r\n     */\r\n    @needsRedrawAccessor()\r\n    set absSize(size: Point2D) {\r\n        this._absSize = size;\r\n        this.c.setRedraw(true);\r\n    }\r\n\r\n    get height(): number {\r\n        return this.size.y;\r\n    }\r\n\r\n    set height(y: number) {\r\n        this.setSizeFromXY(this.width, y);\r\n    }\r\n\r\n    get width(): number {\r\n        return this.size.x;\r\n    }\r\n\r\n    set width(x: number) {\r\n        this.setSizeFromXY(x, this.height);\r\n    }\r\n\r\n    get absWidth(): number {\r\n        return this.absSize.x;\r\n    }\r\n\r\n    set absWidth(x: number) {\r\n        this.absSize.x = x;\r\n    }\r\n\r\n    get absHeight(): number {\r\n        return this.absSize.y;\r\n    }\r\n\r\n    set absHeight(y: number) {\r\n        this.absSize.y = y;\r\n    }\r\n\r\n    setWidth(width: number) {\r\n        this.width = width;\r\n        this.needsResize = true;\r\n        return this;\r\n    }\r\n\r\n    setHeight(height: number) {\r\n        this.height = height;\r\n        return this;\r\n    }\r\n\r\n    setPosFromPoint(pos: Point2D): this {\r\n        this.position = pos;\r\n        return this;\r\n    }\r\n\r\n    setPosFromXY(x: number, y: number): this {\r\n        this.position.x = x;\r\n        this.position.y = y;\r\n        return this;\r\n    }\r\n\r\n    get centerPoint(): Point2D {\r\n        return new Point2D(this.position.x + this.width / 2, this.position.y + this.height / 2);\r\n    }\r\n\r\n\r\n    /**\r\n     * Resize this element to targetSize size\r\n     * and mark it as resized\r\n     * @param targetSize\r\n     */\r\n    resize(targetSize: Point2D) {\r\n        this.resizeFromXY(targetSize.x, targetSize.y);\r\n    }\r\n\r\n    /**\r\n     * Resize this element to targetSize size\r\n     * and mark it as resized\r\n     * @param x width\r\n     * @param y height\r\n     */\r\n    resizeFromXY(x: number, y: number): void {\r\n        this.absWidth = x;\r\n        this.absHeight = y;\r\n        this.needsResize = false;\r\n    }\r\n\r\n    /**\r\n     * Get canvas drawer\r\n     */\r\n    get c(): CanvasDrawer {\r\n        if (!this.cubism) {\r\n            console.log(this.cubism)\r\n            throw new Error(`Cubism instance not set for ${this}`);\r\n        }\r\n        return this.cubism.canvasDrawer;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Render this element\r\n     */\r\n    draw(): void {\r\n    }\r\n\r\n    /**\r\n     * Get a string representation of this element\r\n     */\r\n    toString(): string {\r\n        return `[${this.elementId ? this.elementId : \"NO ID\"}]: ${this.className} abs(${this.absWidth}x${this.absHeight}) rel(${this.width}x${this.height})`;\r\n    }\r\n\r\n}\r\n", "/**\r\n * An Element with children\r\n */\r\nimport {CubismElement} from \"./CubismElement\";\r\nimport {Cubism} from \"../../Cubism\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\nimport SizeKeys from \"../../Constants/SizeKeys\";\r\n\r\nexport default class CubismParentElement extends CubismElement {\r\n    children: CubismElement[];\r\n\r\n    constructor(elementId: string | null = null, ...children: CubismElement[]) {\r\n        super(elementId);\r\n        this.children = [];\r\n        this.addChildren(...children);\r\n    }\r\n\r\n    /**\r\n     * Called by initElement.\r\n     * Therefore, no need to overload initElement\r\n     * @param targetSize\r\n     */\r\n    resize(targetSize: Point2D) {\r\n        super.resize(targetSize);\r\n        this.updateChildrenShape()\r\n    }\r\n\r\n    /**\r\n     * Updates the children's shape\r\n     */\r\n    updateChildrenShape() {\r\n        this.updateChildrenSize();\r\n        this.updateChildrenPosition();\r\n    }\r\n\r\n    /**\r\n     * Updates the children's position\r\n     */\r\n    updateChildrenPosition() {\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates the children's size according to the layout\r\n     */\r\n    updateChildrenSize() {\r\n        for (let child of this.children) {\r\n            let x = child.width;\r\n            let y = child.height;\r\n            if (x === SizeKeys.MATCH_PARENT) {\r\n                x = this.absWidth;\r\n            }\r\n            if (y === SizeKeys.MATCH_PARENT) {\r\n                y = this.absHeight;\r\n                console.log(\"this.absHeight\", this.absHeight);\r\n            }\r\n            child.resize(new Point2D(x, y));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds children to the element\r\n     * @param children\r\n     */\r\n    addChildren(...children: CubismElement[]): this {\r\n        if (children === undefined) {\r\n            console.log(\"children is undefined\");\r\n            return this;\r\n        }\r\n        for (let child of children) {\r\n            this.children.push(child);\r\n            if (this._cubism) {\r\n                child.setCubism(this.cubism);\r\n                this.updateChildrenShape();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a child from the element\r\n     * @param child\r\n     */\r\n    removeChild(child: CubismElement): void {\r\n        let index = this.children.indexOf(child);\r\n        if (index > -1) {\r\n            this.children.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes given children from the element\r\n     * @param children\r\n     */\r\n    removeChildren(children: CubismElement[]): void {\r\n        for (let child of children) {\r\n            this.removeChild(child);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Draws current element and its children\r\n     */\r\n    draw() {\r\n        super.draw();\r\n        this.drawChildren();\r\n    }\r\n\r\n    /**\r\n     * Draws the children\r\n     */\r\n    drawChildren() {\r\n        this.c.offset(this.position);\r\n        for (let child of this.children) {\r\n            child.draw();\r\n        }\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    /**\r\n     * Sets the cubism instance for the element and its children\r\n     * @param cubism\r\n     */\r\n    setCubism(cubism: Cubism) {\r\n        super.setCubism(cubism);\r\n        this.setChildrenCubism(cubism);\r\n    }\r\n\r\n    /**\r\n     * Sets the cubism instance for the children\r\n     * @param cubism\r\n     */\r\n    setChildrenCubism(cubism: Cubism) {\r\n        for (let child of this.children) {\r\n            child.setCubism(cubism);\r\n        }\r\n    }\r\n}\r\n", "import CubismParentElement from \"./CubismParentElement\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\nimport {EventKeys} from \"../../Constants/EventKeys\";\r\nimport {PointerPoint} from \"../../Datatypes/PointerPoint\";\r\nimport {CubismElement} from \"./CubismElement\";\r\n\r\nexport default class PointerHandlerParentElement extends CubismParentElement {\r\n    _dragPoint: PointerPoint | null = null;\r\n    _pointerWasInRange: boolean = false;\r\n    _hovered: boolean = false;\r\n    _pressed: boolean = false;\r\n\r\n    get pressed(): boolean {\r\n        return this._pressed;\r\n    }\r\n\r\n    set pressed(value: boolean) {\r\n        this._pressed = value;\r\n    }\r\n\r\n    get hovered(): boolean {\r\n        return this._hovered;\r\n    }\r\n\r\n    set hovered(value: boolean) {\r\n        this._hovered = value;\r\n    }\r\n\r\n    constructor(id: string | null = null, ...children: CubismElement[]) {\r\n        super(id, ...children);\r\n        this.registerEvent(EventKeys.ON_POINTER_EVENT, this.onPointerEvent.bind(this));\r\n        this.internalAddChildren();\r\n    }\r\n\r\n    internalAddChildren() {\r\n\r\n    }\r\n\r\n    onDown(point: PointerPoint) {\r\n        // console.log(\"onDown\");\r\n    }\r\n\r\n    onUp(point: PointerPoint) {\r\n        // console.log(\"onUp\");\r\n    }\r\n\r\n    onLeave(point: PointerPoint) {\r\n        // console.log(\"onLeave\");\r\n\r\n    }\r\n\r\n    onEnter(point: PointerPoint) {\r\n        // console.log(\"onEnter\");\r\n    }\r\n\r\n    onMove(point: PointerPoint) {\r\n        // console.log(\"onMove\");\r\n    }\r\n\r\n    onParentMove(point: PointerPoint) {\r\n\r\n    }\r\n\r\n\r\n    onPointerEvent(point: PointerPoint) {\r\n        this.triggerThisPointerEvent(point);\r\n        this.triggerChildrenPointerEvent(point.sub(this.position));\r\n    }\r\n\r\n    triggerThisPointerEvent(point: PointerPoint) {\r\n        this.onParentMove(point);\r\n        /**\r\n         * If the pointer is in range of the element\r\n         */\r\n        if (this.pointerInRange(point)) {\r\n            if (!this._pointerWasInRange) {\r\n                this.onEnter(point);\r\n            }\r\n            this._pointerWasInRange = true;\r\n            this.onMove(point);\r\n\r\n            if (!point.pressed) {\r\n                this.hovered = true;\r\n            }\r\n\r\n            if (point.pressed && !this.pressed) {\r\n                this.onDown(point);\r\n                this._dragPoint = point;\r\n                this.pressed = true;\r\n            }\r\n            if (!point.pressed && this.pressed) {\r\n                this.onUp(point);\r\n                this._dragPoint = null;\r\n                this.pressed = false;\r\n            }\r\n        }\r\n        /**\r\n         * Not in range\r\n         */\r\n        else {\r\n            this.hovered = false;\r\n            if (this._pointerWasInRange) {\r\n                this.onLeave(point);\r\n                this._pointerWasInRange = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Triggers the pointer event on the children\r\n     * @param point the pointer point relative to the parent\r\n     */\r\n    triggerChildrenPointerEvent(point: PointerPoint) {\r\n        if (this.pointerInRange(point)) {\r\n            // console.log(\"Children pointer point: \", childrenPointerPoint);\r\n            for (let child of this.children) {\r\n                // console.log(`Triggering child ${child}`);\r\n                // if (child instanceof PointerHandlerParentElement) {\r\n                //     if (child.pointerInRange(point)) {\r\n                //         child.triggerThisPointerEvent(point);\r\n                //         break;\r\n                //     }\r\n                // }\r\n                child.triggerEvent(EventKeys.ON_POINTER_EVENT, point);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks if the pointer is in range of the element\r\n     * @param point The pointer point\r\n     */\r\n    pointerInRange(point: Point2D): boolean {\r\n        if (point.x >= this.position.x && point.x <= this.absWidth + this.position.x) {\r\n            if (point.y >= this.position.y && point.y <= this.absHeight + this.position.y) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n", "export class Colors {\r\n    public static readonly black = \"#000000\";\r\n    public static readonly white = \"#ffffff\";\r\n    public static readonly pureRed = \"#ff0000\";\r\n    public static readonly pureGreen = \"#00ff00\";\r\n    public static readonly pureBlue = \"#0000ff\";\r\n    public static readonly pureYellow = \"#ffff00\";\r\n    public static readonly pureCyan = \"#00ffff\";\r\n    public static readonly pureMagenta = \"#ff00ff\";\r\n    public static readonly orange = \"#ff8000\";\r\n    public static readonly purple = \"#8000ff\";\r\n    public static readonly pink = \"#ff0080\";\r\n    public static readonly brown = \"#804000\";\r\n    public static readonly grey100 = \"#efefef\";\r\n    public static readonly grey200 = \"#a0a0a0\";\r\n    public static readonly grey300 = \"#808080\";\r\n    public static readonly grey400 = \"#606060\";\r\n    public static readonly grey500 = \"#404040\";\r\n    public static readonly grey600 = \"#202020\";\r\n    public static readonly grey700 = \"#000000\";\r\n    public static readonly blue100 = \"#a6d5ff\";\r\n    public static readonly blue200 = \"#7ec0ff\";\r\n    public static readonly blue300 = \"#57abff\";\r\n    public static readonly blue400 = \"#2e96ff\";\r\n    public static readonly blue500 = \"#0080ff\";\r\n    public static readonly blue600 = \"#0060cc\";\r\n    public static readonly blue700 = \"#004099\";\r\n    public static readonly green100 = \"#a6ffcc\";\r\n    public static readonly green200 = \"#7effa6\";\r\n    public static readonly green300 = \"#57ff80\";\r\n    public static readonly green400 = \"#2eff5a\";\r\n    public static readonly green500 = \"#00ff00\";\r\n    public static readonly green600 = \"#00cc00\";\r\n    public static readonly green700 = \"#009900\";\r\n    public static readonly red100 = \"#ffcccc\";\r\n    public static readonly red200 = \"#ff9999\";\r\n    public static readonly red300 = \"#ff6666\";\r\n    public static readonly red400 = \"#ff3333\";\r\n    public static readonly red500 = \"#ff0000\";\r\n    public static readonly red600 = \"#cc0000\";\r\n    public static readonly red700 = \"#990000\";\r\n    public static readonly yellow100 = \"#ffffcc\";\r\n    public static readonly yellow200 = \"#ffff99\";\r\n    public static readonly yellow300 = \"#ffff66\";\r\n    public static readonly yellow400 = \"#ffff33\";\r\n    public static readonly yellow500 = \"#ffff00\";\r\n    public static readonly yellow600 = \"#cccc00\";\r\n    public static readonly yellow700 = \"#999900\";\r\n    public static readonly cyan100 = \"#ccffff\";\r\n    public static readonly cyan200 = \"#99ffff\";\r\n    public static readonly cyan300 = \"#66ffff\";\r\n    public static readonly cyan400 = \"#33ffff\";\r\n    public static readonly cyan500 = \"#00ffff\";\r\n    public static readonly cyan600 = \"#00cccc\";\r\n    public static readonly cyan700 = \"#009999\";\r\n    public static readonly magenta100 = \"#ffccff\";\r\n    public static readonly magenta200 = \"#ff99ff\";\r\n    public static readonly magenta300 = \"#ff66ff\";\r\n    public static readonly magenta400 = \"#ff33ff\";\r\n    public static readonly magenta500 = \"#ff00ff\";\r\n    public static readonly magenta600 = \"#cc00cc\";\r\n    public static readonly magenta700 = \"#990099\";\r\n    public static readonly orange100 = \"#ffcc99\";\r\n    public static readonly orange200 = \"#ff9966\";\r\n    public static readonly orange300 = \"#ff9933\";\r\n    public static readonly orange400 = \"#ff9900\";\r\n    public static readonly orange500 = \"#ff8000\";\r\n    public static readonly orange600 = \"#cc6600\";\r\n    public static readonly orange700 = \"#994c00\";\r\n    public static readonly purple100 = \"#cc99ff\";\r\n    public static readonly purple200 = \"#9966ff\";\r\n    public static readonly purple300 = \"#9933ff\";\r\n    public static readonly purple400 = \"#9900ff\";\r\n    public static readonly purple500 = \"#8000ff\";\r\n    public static readonly purple600 = \"#6600cc\";\r\n    public static readonly purple700 = \"#4c0099\";\r\n    public static readonly pink100 = \"#ff99cc\";\r\n    public static readonly pink200 = \"#ff6699\";\r\n    public static readonly pink300 = \"#ff3399\";\r\n    public static readonly pink400 = \"#ff0099\";\r\n    public static readonly pink500 = \"#ff0080\";\r\n    public static readonly pink600 = \"#cc0066\";\r\n    public static readonly pink700 = \"#99004c\";\r\n    public static readonly brown100 = \"#cc9966\";\r\n    public static readonly brown200 = \"#996633\";\r\n    public static readonly brown300 = \"#994c00\";\r\n    public static readonly brown400 = \"#993300\";\r\n    public static readonly brown500 = \"#804000\";\r\n    public static readonly brown600 = \"#663300\";\r\n    public static readonly brown700 = \"#4c2600\";\r\n\r\n    public static readonly lightGray = \"#c0c0c0\";\r\n    public static readonly darkGray = \"#404040\";\r\n    public static readonly lightRed = \"#ff8080\";\r\n    public static readonly lightGreen = \"#80ff80\";\r\n    public static readonly lightBlue = \"#8080ff\";\r\n    public static readonly lightYellow = \"#ffff80\";\r\n    public static readonly lightCyan = \"#80ffff\";\r\n    public static readonly lightMagenta = \"#ff80ff\";\r\n    public static readonly darkRed = \"#800000\";\r\n    public static readonly darkGreen = \"#008000\";\r\n    public static readonly darkBlue = \"#000080\";\r\n    public static readonly darkYellow = \"#808000\";\r\n    public static readonly darkCyan = \"#008080\";\r\n    public static readonly darkMagenta = \"#800080\";\r\n    public static readonly transparent = \"rgba(0,0,0,0)\";\r\n    public static readonly transparentBlack = \"rgba(0,0,0,0.5)\";\r\n    public static readonly transparentWhite = \"rgba(255,255,255,0.5)\";\r\n    public static readonly transparentRed = \"rgba(255,0,0,0.5)\";\r\n    public static readonly transparentGreen = \"rgba(0,255,0,0.5)\";\r\n    public static readonly transparentBlue = \"rgba(0,0,255,0.5)\";\r\n    public static readonly transparentYellow = \"rgba(255,255,0,0.5)\";\r\n    public static readonly transparentCyan = \"rgba(0,255,255,0.5)\";\r\n    public static readonly transparentMagenta = \"rgba(255,0,255,0.5)\";\r\n    public static readonly transparentOrange = \"rgba(255,128,0,0.5)\";\r\n    public static readonly transparentPurple = \"rgba(128,0,255,0.5)\";\r\n    public static readonly transparentPink = \"rgba(255,0,128,0.5)\";\r\n}", "import {Point2D} from \"../../Math/Point\";\r\n\r\nexport default class PhysicalPoint2D extends Point2D {\r\n    velocity: Point2D = new Point2D(0, 0);\r\n    // acceleration: Point2D = new Point2D(0, 0);\r\n    resistance: number = 0;\r\n    velocityScale: number = 0;\r\n\r\n    setVelocity(velocity: Point2D) {\r\n        this.velocity = velocity;\r\n        return this;\r\n    }\r\n\r\n    setResistance(resistance: number) {\r\n        this.resistance = resistance;\r\n        return this;\r\n    }\r\n\r\n    impulse(impulse: Point2D) {\r\n        this.velocity.offset(impulse);\r\n        this.velocityScale = 1;\r\n        return this;\r\n    }\r\n\r\n    update() {\r\n        if (this.velocityScale > 0) {\r\n            this.velocity = this.velocity.scale(this.velocityScale);\r\n            this.velocityScale -= this.resistance;\r\n        }\r\n        if (this.velocityScale < 0) {\r\n            this.velocityScale = 0;\r\n        }\r\n        if (this.velocityScale == 0) {\r\n            this.velocity.setXY(0, 0)\r\n        }\r\n        this.offset(this.velocity);\r\n    }\r\n\r\n}\r\n", "import PointerHandlerParentElement from \"../Basic/PointerHanderParentElement\";\r\nimport {Colors} from \"../../Constants/Colors\";\r\nimport {PointerPoint} from \"../../Datatypes/PointerPoint\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\nimport {CubismElement} from \"../Basic/CubismElement\";\r\nimport PhysicalPoint2D from \"../../Utils/Physics/Physics2D/PhysicalPoint2D\";\r\nimport {needsRedrawAccessor} from \"../../Utils/Decorators/NeedsRedraw\";\r\n\r\nexport default class RecursiveRect extends PointerHandlerParentElement {\r\n    lastPoint: PointerPoint | null = null;\r\n    relativePosition: Point2D = new Point2D(200, 200);\r\n\r\n    frameCount: number = 0;\r\n\r\n    _position: PhysicalPoint2D = new PhysicalPoint2D(0, 0).setResistance(0.001);\r\n    @needsRedrawAccessor(true, true)\r\n    get position(): PhysicalPoint2D {\r\n        return this._position;\r\n    }\r\n    set position(point: PhysicalPoint2D) {\r\n        this._position = point;\r\n    }\r\n\r\n    recursionCount: number = 0;\r\n    wiggleStrength: number = 0.1;\r\n\r\n    setRecursionCount(recursionCount: number) {\r\n        this.recursionCount = recursionCount;\r\n        return this;\r\n    }\r\n\r\n    wiggle() {\r\n        if (this.frameCount % 120 == 0) {\r\n            let range = this.wiggleStrength * Math.random();\r\n            this.position.impulse(new Point2D(range * (Math.random() - 0.5), range * (Math.random() - 0.5)));\r\n        }\r\n    }\r\n\r\n    setWiggleStrength(strength: number) {\r\n        this.wiggleStrength = strength;\r\n        return this;\r\n    }\r\n\r\n    setRelativePosition(point: Point2D) {\r\n        this.relativePosition = point;\r\n        return this;\r\n    }\r\n\r\n    draw() {\r\n        this.frameCount++;\r\n        this.c.offset(this.position);\r\n\r\n        this.position.update();\r\n        if (!this.pressed) {\r\n            this.wiggle();\r\n        }\r\n        if (this.pressed) {\r\n            this.frameCount = 0;\r\n        }\r\n        this.c.setFillStyle(Colors.green100);\r\n        this.c.setStrokeWidth(2);\r\n        this.c.setStrokeStyle(Colors.green700);\r\n        let relaPos = this.position.sub(this.relativePosition);\r\n        let relaSpeed = 0.2;\r\n        let relaSize = 10;\r\n        this.c.drawRect(0, 0, this.width, this.height);\r\n        for (let i = 1; i < this.recursionCount + 1; i++) {\r\n            let relaSpeedI = relaSpeed * i;\r\n            let relaSizeI = relaSize * i;\r\n            this.c.offset(relaPos.scale(relaSpeedI));\r\n            this.c.drawRect(relaSizeI, relaSizeI, this.width - relaSizeI, this.height - relaSizeI);\r\n            this.c.restoreTranslate();\r\n        }\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    onMove(point: PointerPoint) {\r\n        if (point.pressure > 0) {\r\n            if (!this.lastPoint) {\r\n                this.lastPoint = point.sub(this.position);\r\n            }\r\n            this.position.set(point.sub(this.lastPoint));\r\n        } else {\r\n            this.lastPoint = null;\r\n        }\r\n    }\r\n}\r\n", "import PointerHandlerParentElement from \"../Basic/PointerHanderParentElement\";\r\nimport {CubismElement} from \"../Basic/CubismElement\";\r\nimport {Colors} from \"../../Constants/Colors\";\r\nimport {Cubism} from \"../../Cubism\";\r\nimport {needsRedrawAccessor} from \"../../Utils/Decorators/NeedsRedraw\";\r\n\r\nexport class ChangingRainbowBackground extends CubismElement{\r\n    frameCount: number = 0;\r\n\r\n    saturation:number = 70;\r\n    lightness: number = 90;\r\n    changingSpeed: number = 0.2;\r\n\r\n    setSaturation(s: number) {\r\n        if (s > 100) {\r\n            s = 100;\r\n        }\r\n        this.saturation = s;\r\n        return this;\r\n    }\r\n    setChangingSpeed(speed: number) {\r\n        this.changingSpeed = speed;\r\n        return this;\r\n    }\r\n    setLightness(l: number) {\r\n        if (l > 100) {\r\n            l = 100;\r\n        }\r\n        this.lightness = l;\r\n        return this;\r\n    }\r\n    draw() {\r\n        this.frameCount++;\r\n        this.c.offset(this.position);\r\n        let currHue = this.frameCount * this.changingSpeed % 360;\r\n        let currColor = `hsl(${currHue}, ${this.saturation}%, ${this.lightness}%)`;\r\n\r\n        this.c.setFillStyle(currColor);\r\n        this.c.setStrokeWidth(0);\r\n        this.c.setStrokeStyle(currColor);\r\n        this.c.drawRect(0, 0, this.absWidth, this.absHeight);\r\n        // super.draw();\r\n        this.c.restoreTranslate();\r\n    }\r\n}\r\n", "export default class CanvasRecorder {\r\n    canvas: HTMLCanvasElement;\r\n    fps: number;\r\n    recorder: MediaRecorder | null = null;\r\n    chunks: Blob[] = [];\r\n    videoStream: MediaStream | null = null;\r\n    isRecording: boolean = false;\r\n\r\n    /**\r\n     * Create a new CanvasRecorder\r\n     * @param canvas\r\n     * @param fps\r\n     */\r\n    constructor(canvas: HTMLCanvasElement | string, fps = 60) {\r\n        if (typeof canvas === \"string\") {\r\n            let tempCanvas = document.getElementById(canvas);\r\n            if (!tempCanvas) {\r\n                throw new Error(\"Canvas not found\");\r\n            }\r\n            this.canvas = tempCanvas as HTMLCanvasElement;\r\n        } else {\r\n            this.canvas = canvas;\r\n        }\r\n        this.fps = fps;\r\n    }\r\n\r\n    /**\r\n     * Start recording\r\n     * @param fileName The name of the file to save\r\n     * @param fileType The type of the file to save\r\n     */\r\n    startRecording(fileName = \"video\", fileType = \"webm\"): void {\r\n        this.videoStream = this.canvas.captureStream(this.fps);\r\n        this.recorder = new MediaRecorder(this.videoStream);\r\n\r\n        this.chunks = [];\r\n\r\n        this.recorder.ondataavailable = (e) => {\r\n            this.chunks.push(e.data);\r\n        }\r\n        this.recorder.start();\r\n\r\n        this.recorder.onstop = () => {\r\n            console.log(\"Recording stopped\");\r\n            let blob = new Blob(this.chunks, {type: `video/${fileType}`});\r\n            let url = URL.createObjectURL(blob);\r\n            let a = document.createElement(\"a\");\r\n            a.href = url;\r\n            a.download = `${fileName}.${fileType}`;\r\n            a.click();\r\n            URL.revokeObjectURL(url);\r\n        }\r\n\r\n        this.isRecording = true;\r\n    }\r\n\r\n    /**\r\n     * Stop recording\r\n     */\r\n    stopRecording(): void {\r\n        if (this.recorder) {\r\n            if (this.recorder.state === \"recording\") {\r\n                console.log(\"is recording\");\r\n                this.recorder.stop();\r\n            }\r\n        }\r\n        this.isRecording = false;\r\n    }\r\n}\r\n", "import {CubismOuterGlobal} from \"../Global/Outer/CubismOuterGlobal\";\r\nimport CanvasRecorder from \"./CanvasRecorder\";\r\n\r\nexport class StaticDemo {\r\n    private static _instance: StaticDemo;\r\n\r\n    private _demoFunctions: { [key: string]: DemoFunction } = {};\r\n\r\n    selector: HTMLSelectElement = document.getElementById(\"selector\") as HTMLSelectElement;\r\n    codeText: HTMLTextAreaElement = document.getElementById(\"codeText\") as HTMLTextAreaElement;\r\n    descriptionText: HTMLDivElement = document.getElementById(\"descriptionText\") as HTMLDivElement;\r\n\r\n    controlDiv: HTMLDivElement = document.getElementById(\"controlDiv\") as HTMLDivElement;\r\n\r\n    currDemoFunction: DemoFunction | null = null;\r\n\r\n    hotReloadCheckbox: HTMLInputElement | null = null;\r\n    updateButton: HTMLButtonElement | null = null;\r\n\r\n    // currentDemoName: string | null = null;\r\n    canvasRecorder: CanvasRecorder = new CanvasRecorder(\"mainCanvas\");\r\n\r\n    private constructor() {\r\n        this.initSelector();\r\n        this.initCodeText();\r\n        this.resetControlsDiv();\r\n        this.resetCanvas();\r\n        this.initRecorder();\r\n    }\r\n\r\n    initRecorder() {\r\n        let recordBtn = document.getElementById(\"recordBtn\") as HTMLButtonElement;\r\n        let recordText = \"Start Recording\";\r\n        let stopText = \"Stop\";\r\n        recordBtn.innerText = recordText;\r\n        recordBtn.onclick = () => {\r\n            if (this.canvasRecorder.isRecording) {\r\n                this.canvasRecorder.stopRecording();\r\n                recordBtn.innerText = recordText;\r\n            } else {\r\n\r\n                this.canvasRecorder.startRecording(`${this.selector.value}-${new Date().toLocaleString()}`);\r\n                recordBtn.innerText = stopText;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    initControlDiv() {\r\n        this.initHotReload();\r\n        this.initUpdateButton();\r\n    }\r\n\r\n    resetControlsDiv() {\r\n        this.controlDiv.innerHTML = \"\";\r\n        this.initControlDiv();\r\n    }\r\n\r\n    initHotReload() {\r\n        let hotReload = document.createElement(\"input\");\r\n        hotReload.type = \"checkbox\";\r\n        hotReload.id = \"hotReloadCheckbox\";\r\n        hotReload.checked = true;\r\n        this.hotReloadCheckbox = hotReload;\r\n\r\n        let hotReloadLabel = document.createElement(\"label\");\r\n        hotReloadLabel.htmlFor = \"hotReloadCheckbox\";\r\n        hotReloadLabel.innerHTML = \"Hot Reload\";\r\n        hotReloadLabel.style.marginRight = \"10px\";\r\n\r\n        this.controlDiv.appendChild(hotReload);\r\n        this.controlDiv.appendChild(hotReloadLabel);\r\n    }\r\n\r\n    initCodeText() {\r\n        this.codeText.onchange = this.onCodeTextChange.bind(this);\r\n        this.codeText.oninput = this.onCodeTextInput.bind(this);\r\n    }\r\n\r\n    initUpdateButton() {\r\n        let updateButton = document.createElement(\"button\");\r\n        updateButton.innerHTML = \"Reload\";\r\n        updateButton.onclick = this.updateButtonOnClick.bind(this);\r\n        this.updateButton = updateButton;\r\n        this.controlDiv.appendChild(updateButton);\r\n    }\r\n\r\n    updateButtonOnClick() {\r\n        this.updateCurrDemoFunction();\r\n    }\r\n\r\n    updateCurrDemoFunction() {\r\n        console.log(\"updateCurrDemoFunction\");\r\n        CubismOuterGlobal.getCubismInstance(\"mainCanvas\").destroy();\r\n        this.resetCanvas();\r\n\r\n        let currName = this.selector.value;\r\n\r\n        this._demoFunctions[currName].setFunctionThroughFormattedString(this.codeText.value);\r\n\r\n        this.setCurrentDemoCode(this.selector.value);\r\n\r\n        this.resetControlsDiv();\r\n    }\r\n\r\n\r\n    onCodeTextInput() {\r\n        // console.log(\"code text input\");\r\n        if (this.hotReloadCheckbox && this.hotReloadCheckbox.checked) {\r\n            this.updateCurrDemoFunction();\r\n        }\r\n    }\r\n\r\n    onCodeTextChange() {\r\n    }\r\n\r\n\r\n    initSelector() {\r\n        this.selector.onchange = this.onSelectorChange.bind(this);\r\n        this.selector.onload = this.onSelectorChange.bind(this);\r\n    }\r\n\r\n    resetCanvas() {\r\n        let canvas = document.getElementById(\"mainCanvas\") as HTMLCanvasElement;\r\n        canvas.width = 400;\r\n        canvas.height = 400;\r\n    }\r\n\r\n    setCurrentDemoCode(name: string) {\r\n        this.codeText.value = this._demoFunctions[name].toString();\r\n        this.selector.value = name;\r\n        this.descriptionText.innerHTML = this._demoFunctions[name].description;\r\n\r\n        this.currDemoFunction = this._demoFunctions[name];\r\n\r\n        this.runCurrentDemo();\r\n    }\r\n\r\n    runCurrentDemo() {\r\n        if (this.currDemoFunction) {\r\n            this.currDemoFunction.run();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a demo function to the dict of demo functions\r\n     * @param name\r\n     * @param func\r\n     * @param description optional description of the demo function\r\n     */\r\n    addDemoFunction(name: string, func: Function, description: string = \"[No description]\") {\r\n        let option = document.createElement(\"option\");\r\n        option.text = name;\r\n        this.selector.add(option);\r\n\r\n        this._demoFunctions[name] = new DemoFunction(func, name, description);\r\n        this.setCurrentDemoCode(name);\r\n    }\r\n\r\n\r\n    onSelectorChange() {\r\n        let selected = this.selector.options[this.selector.selectedIndex].text;\r\n        console.log(`selected: ${selected}`);\r\n        this.setCurrentDemoCode(selected);\r\n        this.updateCurrDemoFunction();\r\n    }\r\n\r\n    createFunctionFromString(s: string) {\r\n        return new Function(s) as () => void;\r\n    }\r\n\r\n    static get i() {\r\n        if (!StaticDemo._instance) {\r\n            StaticDemo._instance = new StaticDemo();\r\n        }\r\n        return StaticDemo._instance;\r\n    }\r\n}\r\n\r\nclass DemoFunction {\r\n    func: Function;\r\n    funcName: string;\r\n    description: string;\r\n\r\n    constructor(func: Function, funcName: string, description: string) {\r\n        this.func = func;\r\n\r\n        this.funcName = funcName;\r\n        this.description = description;\r\n    }\r\n\r\n    toString() {\r\n        return this.functionToFormattedString(this.funcName, this.func);\r\n    }\r\n\r\n    functionToFormattedString(funcName: string, func: Function) {\r\n        let s = func.toString();\r\n        // Remove the first and last line\r\n        s = s.substring(s.indexOf(\"{\") + 1, s.lastIndexOf(\"}\"));\r\n        // Add a new line after each object\r\n        s = s.replace(/;/g, \";\\n\");\r\n\r\n        // Remove empty line at the beginning\r\n        s = s.replace(/^\\s*\\n/gm, \"\");\r\n        // Remove empty line at the end\r\n        s = s.replace(/\\n\\s*$/gm, \"\");\r\n\r\n        let leadingSpacesCount = 0;\r\n        if (s.length > 0) {\r\n            while (s[leadingSpacesCount] === \" \") {\r\n                leadingSpacesCount++;\r\n            }\r\n        }\r\n\r\n        // // Remove leading spaces\r\n        let p = `^ {${leadingSpacesCount}}`;\r\n        s = s.replace(new RegExp(p, \"gm\"), \"\");\r\n\r\n        let lines = s.split(\"\\n\");\r\n\r\n        let newString = \"\";\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let line = lines[i];\r\n            if (i == 0) {\r\n                newString += line;\r\n            } else {\r\n                let currLeadingSpacesCount = 0;\r\n                while (line[currLeadingSpacesCount] === \" \") {\r\n                    currLeadingSpacesCount++;\r\n                }\r\n\r\n                if (currLeadingSpacesCount === 0 && line.length > 0 && !(line[0] === \"}\" || line[0] === \")\")) {\r\n                    newString += `\\n`;\r\n                }\r\n\r\n                let spaces = new Array(currLeadingSpacesCount + 5).join(\" \");\r\n                // console.log(`spaces: [${spaces}]`);\r\n                // newString += \"\\n\" + line;\r\n                // Replace all spaces with 5 spaces\r\n\r\n                let lineToAppend = line.replace(/\\(\\)\\./gm, `()\\n${spaces}.`);\r\n                newString += \"\\n\" + lineToAppend;\r\n            }\r\n        }\r\n\r\n        return newString;\r\n    }\r\n\r\n    setFunction(func: Function) {\r\n        this.func = func;\r\n    }\r\n\r\n    setFunctionThroughFormattedString(s: string) {\r\n        this.func = new Function(s);\r\n    }\r\n\r\n    toFunction(): Function {\r\n        return this.func;\r\n    }\r\n\r\n    run() {\r\n        this.func();\r\n    }\r\n}\r\n", "import {StaticDemo} from \"./StaticDemo\";\r\n\r\n/**\r\n * Decorator for demo functions\r\n * adds the function to the StaticDemo instance\r\n */\r\nexport function demoFunction(...descriptionLines: string[]) {\r\n    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n        let demo = StaticDemo.i;\r\n        let currFunction = target[propertyKey];\r\n\r\n        if (descriptionLines.length === 0) {\r\n            descriptionLines.push(\"[No description]\");\r\n        }\r\n\r\n        let description = \"Description:\\n\" + descriptionLines.join(\"\\n\");\r\n\r\n        // Add space before capital letters\r\n        let name = propertyKey.replace(/([A-Z])/g, ' $1').trim();\r\n        // name += \"  \";\r\n        // Capitalize first letter\r\n        name = name.charAt(0).toUpperCase() + name.slice(1);\r\n        // name = `[ ${name} ]`;\r\n\r\n        demo.addDemoFunction(name, currFunction, description);\r\n    };\r\n}\r\n", "import PointerHandlerParentElement from \"../Basic/PointerHanderParentElement\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\n\r\nexport abstract class LayoutElement extends PointerHandlerParentElement {\r\n    getMaxElementWidth(): number {\r\n        let maxWidth = 0;\r\n        for (let child of this.children) {\r\n            if (child.absWidth > maxWidth) {\r\n                maxWidth = child.absWidth;\r\n            }\r\n        }\r\n        return maxWidth;\r\n    }\r\n    getCumulativeWidth(): number {\r\n        let width = 0;\r\n        for (let child of this.children) {\r\n            width += child.absWidth;\r\n        }\r\n        return width;\r\n    }\r\n    getMaxElementHeight(): number {\r\n        let maxHeight = 0;\r\n        for (let child of this.children) {\r\n            if (child.absHeight > maxHeight) {\r\n                maxHeight = child.absHeight;\r\n            }\r\n        }\r\n        return maxHeight;\r\n    }\r\n    getCumulativeHeight(): number {\r\n        let height = 0;\r\n        for (let child of this.children) {\r\n            height += child.absHeight;\r\n        }\r\n        return height;\r\n    }\r\n    pointerInRange(point: Point2D): boolean {\r\n        // console.log(`Pointer in range of ${this}`);\r\n        return true;\r\n    }\r\n}\r\n", "import {LayoutElement} from \"./LayoutElement\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\n\r\nexport class VerticalLayout extends LayoutElement {\r\n    updateChildrenPosition() {\r\n        let maxChildWidth = 0;\r\n        super.updateChildrenPosition();\r\n        let x = 0;\r\n        let y = 0;\r\n        for (let child of this.children) {\r\n            child.position = new Point2D(x, y);\r\n            if (child instanceof LayoutElement) {\r\n                child.height = child.getCumulativeHeight();\r\n                child.width = child.getCumulativeWidth();\r\n            }\r\n            if (child.width > maxChildWidth) {\r\n                maxChildWidth = child.width;\r\n            }\r\n            y += child.height;\r\n        }\r\n        this.absWidth = maxChildWidth;\r\n        this.absHeight = y;\r\n    }\r\n\r\n    getCumulativeWidth(): number {\r\n        return this.getMaxElementWidth();\r\n    }\r\n}\r\n", "import {Colors} from \"../Constants/Colors\";\r\n\r\nexport default class BasicTheme{\r\n    fillStyle: string = Colors.white;\r\n    strokeStyle: string = Colors.blue700;\r\n    lineWidth: number = 2;\r\n\r\n    setFillStyle(fillStyle: string) {\r\n        this.fillStyle = fillStyle;\r\n        return this;\r\n    }\r\n    setStrokeStyle(strokeStyle: string) {\r\n        this.strokeStyle = strokeStyle;\r\n        return this;\r\n    }\r\n    setLineWidth(width: number) {\r\n        this.lineWidth = width;\r\n        return this;\r\n    }\r\n    static get default(): BasicTheme{\r\n        return new BasicTheme();\r\n    }\r\n    static get transparent(): BasicTheme{\r\n        return new BasicTheme().setLineWidth(0).setFillStyle(Colors.transparent).setStrokeStyle(Colors.transparent);\r\n    }\r\n    static get hover(): BasicTheme{\r\n        return new BasicTheme().setFillStyle(Colors.grey100);\r\n    }\r\n    static get pressed(): BasicTheme{\r\n        return new BasicTheme().setFillStyle(Colors.grey200);\r\n    }\r\n}\r\n", "export default class ThemeKeys{\r\n    static readonly ON_HOVER_THEME = \"ON_HOVER_THEME\";\r\n    static readonly ON_DOWN_THEME = \"ON_DOWN_THEME\";\r\n    static readonly DEFAULT_THEME = \"DEFAULT_THEME\";\r\n}\r\n", "import {CanvasDrawer} from \"../../Drawer/CanvasDrawer\";\r\nimport {PointerPoint} from \"../../Datatypes/PointerPoint\";\r\n\r\nimport PointerHandlerParentElement from \"./PointerHanderParentElement\";\r\nimport BasicTheme from \"../../Theme/BasicTheme\";\r\nimport {needsRedrawAccessor} from \"../../Utils/Decorators/NeedsRedraw\";\r\nimport ThemeKeys from \"../../Constants/ThemeKeys\";\r\n\r\nexport class ThemedElement extends PointerHandlerParentElement {\r\n    _themes: { [key: string]: BasicTheme } | undefined;\r\n    _currTheme: BasicTheme | undefined;\r\n\r\n    get themes(): { [key: string]: BasicTheme } {\r\n        if (this._themes === undefined) {\r\n            this._themes = {};\r\n        }\r\n        return this._themes;\r\n    }\r\n\r\n    setTheme(name: string, theme: BasicTheme): ThemedElement {\r\n        this.themes[name] = theme;\r\n        return this;\r\n    }\r\n\r\n    onCreate() {\r\n        super.onCreate();\r\n        this.setTheme(ThemeKeys.DEFAULT_THEME, BasicTheme.default);\r\n        this.currTheme = this.themes[ThemeKeys.DEFAULT_THEME];\r\n    }\r\n\r\n    get currTheme(): BasicTheme {\r\n        if (this._currTheme === undefined) {\r\n            this._currTheme = new BasicTheme();\r\n        }\r\n        return this._currTheme;\r\n    }\r\n\r\n    @needsRedrawAccessor()\r\n    set currTheme(theme: BasicTheme) {\r\n        // console.log(\"Setting theme to: \", theme);\r\n        this._currTheme = theme;\r\n    }\r\n\r\n    updateCanvasDrawerTheme(): void {\r\n        if (this.currTheme) {\r\n            this.c.setFillStyle(this.currTheme.fillStyle);\r\n            this.c.setStrokeStyle(this.currTheme.strokeStyle);\r\n            this.c.setStrokeWidth(this.currTheme.lineWidth);\r\n        } else {\r\n            console.log(\"No theme set for element\");\r\n        }\r\n    }\r\n\r\n    draw(): void {\r\n        super.draw();\r\n        this.updateCanvasDrawerTheme();\r\n    }\r\n}\r\n", "import {ThemedElement} from \"./ThemedElement\";\r\nimport BasicTheme from \"../../Theme/BasicTheme\";\r\nimport {PointerPoint} from \"../../Datatypes/PointerPoint\";\r\nimport ThemeKeys from \"../../Constants/ThemeKeys\";\r\nimport {Colors} from \"../../Constants/Colors\";\r\n\r\nexport class PointerInteractThemeElement extends ThemedElement {\r\n\r\n    onCreate() {\r\n        super.onCreate();\r\n        this.setTheme(ThemeKeys.ON_DOWN_THEME, BasicTheme.pressed);\r\n        this.setTheme(ThemeKeys.ON_HOVER_THEME, BasicTheme.hover);\r\n    }\r\n    onDown(point: PointerPoint) {\r\n        super.onDown(point);\r\n        this.currTheme = this.themes[ThemeKeys.ON_DOWN_THEME];\r\n    }\r\n    onUp(point: PointerPoint) {\r\n        super.onUp(point);\r\n        this.currTheme = this.themes[ThemeKeys.ON_HOVER_THEME];\r\n    }\r\n    onEnter(point: PointerPoint) {\r\n        super.onEnter(point);\r\n        this.currTheme = this.themes[ThemeKeys.ON_HOVER_THEME];\r\n    }\r\n    onLeave(point: PointerPoint) {\r\n        super.onLeave(point);\r\n        this.currTheme = this.themes[ThemeKeys.DEFAULT_THEME];\r\n    }\r\n}\r\n", "import {PointerInteractThemeElement} from \"./Basic/PointerInteractThemeElement\";\r\n\r\nexport class RectElement extends PointerInteractThemeElement {\r\n    draw() {\r\n        super.draw();\r\n        let c = this.c;\r\n        c.offset(this.position);\r\n        c.drawRectWithPoints(this.absSize);\r\n        c.restoreTranslate();\r\n    }\r\n}\r\n", "import {PointerInteractThemeElement} from \"./Basic/PointerInteractThemeElement\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\n\r\nexport class CircleElement extends PointerInteractThemeElement {\r\n    draw(): void {\r\n        super.draw();\r\n        let c = this.c;\r\n        // let center = this.centerPoint;\r\n        c.offset(this.position);\r\n        c.drawCircle(this.width/2, this.height/2, this.size.min / 2);\r\n        // console.log(\"Drawing circle at: \", center);\r\n        c.restoreTranslate();\r\n    }\r\n    pointerInRange(point: Point2D): boolean {\r\n        let radius = this.size.min / 2;\r\n        let dist = this.centerPoint.euclideanDistance(point);\r\n        return dist <= radius;\r\n    }\r\n}\r\n", "import {LayoutElement} from \"./LayoutElement\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\n\r\nexport class HorizontalLayout extends LayoutElement {\r\n    updateChildrenPosition() {\r\n        let maxChildHeight = 0;\r\n        super.updateChildrenPosition();\r\n        let x = 0;\r\n        let y = 0;\r\n        for (let child of this.children) {\r\n            child.position = new Point2D(x, y);\r\n            if (child instanceof LayoutElement) {\r\n                child.height = child.getCumulativeHeight();\r\n                child.width = child.getCumulativeWidth();\r\n            }\r\n            if (child.height > maxChildHeight) {\r\n                maxChildHeight = child.height;\r\n            }\r\n            x += child.width;\r\n        }\r\n        this.absHeight = maxChildHeight;\r\n        this.absWidth = x;\r\n    }\r\n    getCumulativeHeight(): number {\r\n        return  this.getMaxElementHeight();\r\n    }\r\n}\r\n", "import {CubismElement} from \"./Basic/CubismElement\";\r\nimport {Colors} from \"../Constants/Colors\";\r\n\r\nexport class Background extends CubismElement{\r\n    color: string = Colors.white;\r\n    setColor(color: string) {\r\n        this.color = color;\r\n        return this;\r\n    }\r\n    draw() {\r\n        super.draw();\r\n        this.c.setFillStyle(this.color);\r\n        this.c.drawRect(0, 0, this.cubism.width, this.cubism.height);\r\n    }\r\n}", "import BasicTheme from \"./BasicTheme\";\r\nimport {Colors} from \"../Constants/Colors\";\r\n\r\nexport class FontTheme extends BasicTheme{\r\n    fontSize: number = 20;\r\n    fontFamily: string = \"Arial\";\r\n\r\n    setFontSize(size: number) {\r\n        this.fontSize = size;\r\n        return this;\r\n    }\r\n\r\n    setFontFamily(fontFamily: string) {\r\n        this.fontFamily = fontFamily;\r\n        return this;\r\n    }\r\n\r\n    static get default(): FontTheme{\r\n        return new FontTheme().setFillStyle(Colors.black);\r\n    }\r\n}", "import {CubismElement} from \"./Basic/CubismElement\";\r\nimport {FontTheme} from \"../Theme/FontTheme\";\r\n\r\nexport class TextElement extends CubismElement {\r\n    theme: FontTheme = FontTheme.default;\r\n    content: string = \"NO CONTENT\";\r\n\r\n    setFontSize(size: number) {\r\n        this.theme.fontSize = size;\r\n    }\r\n\r\n    constructor(content: string, id: string | null = null) {\r\n        super(id);\r\n        this.content = content;\r\n    }\r\n\r\n    get height(): number {\r\n        return this.theme.fontSize;\r\n    }\r\n\r\n    draw() {\r\n        super.draw();\r\n        let c = this.c;\r\n        c.setFont(`${this.theme.fontSize}px ${this.theme.fontFamily}`);\r\n        c.offset(this.position);\r\n        c.setFillStyle(this.theme.fillStyle);\r\n        c.setStrokeStyle(this.theme.strokeStyle);\r\n\r\n        let textWidth = c.measureText(this.content).width;\r\n        let textHeight = this.theme.fontSize;\r\n        c.fillText(this.content, 0, textHeight);\r\n        c.restoreTranslate();\r\n    }\r\n}\r\n", "import {PointerInteractThemeElement} from \"./Basic/PointerInteractThemeElement\";\r\nimport BasicIcon from \"./Icons/BasicIcon\";\r\nimport {VerticalLayout} from \"./Layouts/VerticalLayout\";\r\nimport {TextElement} from \"./TextElement\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\nimport {PointerPoint} from \"../Datatypes/PointerPoint\";\r\n\r\nexport class ButtonElement extends PointerInteractThemeElement {\r\n    _icon: BasicIcon | null = null;\r\n    _text: TextElement | null = null;\r\n\r\n    _onClick: (point:PointerPoint) => void = () => {};\r\n\r\n    iconXOffset = 10;\r\n    textXOffset = 10;\r\n\r\n    set icon(icon: BasicIcon | null) {\r\n        this._icon = icon;\r\n        if (icon !== null) {\r\n            icon.position.x = this.iconXOffset;\r\n            icon.position.y = this.size.y / 2 - icon.height / 2;\r\n            this.addChildren(icon);\r\n        }\r\n    }\r\n\r\n    get icon(): BasicIcon | null {\r\n        return this._icon;\r\n    }\r\n\r\n    get text(): TextElement | null {\r\n        return this._text;\r\n    }\r\n\r\n    set text(text: TextElement | null) {\r\n        this._text = text;\r\n        if (text !== null) {\r\n            text.position.x = this.textXOffset;\r\n            text.position.y = this.size.y / 2 - text.height / 2 -2;\r\n            if (this.icon !== null) {\r\n                text.position.x += this.icon.width + this.iconXOffset;\r\n            }\r\n            this.addChildren(text);\r\n        }\r\n    }\r\n\r\n    setOnClick(func:(point:Point2D)=>void) {\r\n        this._onClick = func;\r\n        return this;\r\n    }\r\n\r\n    onUp(point: PointerPoint): void {\r\n        super.onUp(point);\r\n        this._onClick(point);\r\n    }\r\n\r\n    draw() {\r\n        this.updateCanvasDrawerTheme();\r\n        this.c.offset(this.position);\r\n        this.c.drawRectWithPoints(this.size);\r\n        if (this.icon !== null) {\r\n\r\n            this.icon.draw();\r\n        }\r\n        if (this.text !== null) {\r\n            this.text.draw();\r\n        }\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    setIcon(icon: BasicIcon) {\r\n        this.icon = icon;\r\n        return this;\r\n    }\r\n\r\n    setText(text: string | TextElement) {\r\n        if (typeof text === \"string\") {\r\n            text = new TextElement(text);\r\n        }\r\n        this.text = text;\r\n        return this;\r\n    }\r\n}\r\n", "import {CubismElement} from \"../Basic/CubismElement\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\n\r\nexport default class BasicIcon extends CubismElement {\r\n    _size: Point2D = new Point2D(20, 20);\r\n\r\n    draw() {\r\n        super.draw();\r\n        this.c.offset(this.position);\r\n        this.drawIcon();\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    drawIcon() {\r\n        throw new Error(\"Not implemented\");\r\n    }\r\n}\r\n", "import BasicIcon from \"./BasicIcon\";\r\n\r\nexport class CloseIcon extends BasicIcon {\r\n    drawIcon() {\r\n        let size = this.size.min\r\n        this.c.ctx.beginPath();\r\n        this.c.ctx.moveTo(0, 0);\r\n        this.c.ctx.lineTo(size, size);\r\n        this.c.ctx.moveTo(size, 0);\r\n        this.c.ctx.lineTo(0, size);\r\n        this.c.ctx.stroke();\r\n    }\r\n}", "import BasicIcon from \"./BasicIcon\";\r\n\r\nexport class AddIcon extends BasicIcon{\r\n    drawIcon() {\r\n        let size = this.size.min;\r\n        this.c.ctx.beginPath();\r\n        this.c.ctx.moveTo(0, size/2);\r\n        this.c.ctx.lineTo(size, size/2);\r\n        this.c.ctx.moveTo(size/2, 0);\r\n        this.c.ctx.lineTo(size/2, size);\r\n        this.c.ctx.stroke();\r\n    }\r\n}", "import {WebSvgIcon} from \"./SVGIcon\";\r\nimport BasicIcon from \"./BasicIcon\";\r\nimport BasicTheme from \"../../Theme/BasicTheme\";\r\nimport {Colors} from \"../../Constants/Colors\";\r\n\r\nexport class MaterialIcons extends BasicIcon {\r\n    svgImg: HTMLImageElement;\r\n\r\n    theme: BasicTheme = new BasicTheme().setFillStyle(Colors.blue700).setStrokeStyle(Colors.blue200);\r\n\r\n    constructor(iconName: string) {\r\n        super();\r\n\r\n        this.svgImg = new Image()\r\n        let iconUrl = \"https://fonts.gstatic.com/s/i/materialicons/\" + iconName + \"/v8/20px.svg\"\r\n\r\n        let xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.open(\"GET\", iconUrl, false); // false for synchronous request\r\n        xmlHttp.send(null);\r\n        let rawSvg = xmlHttp.responseText;\r\n        this.svgImg.src = \"data:image/svg+xml;base64,\" + btoa(rawSvg);\r\n    }\r\n\r\n    draw() {\r\n        this.c.offset(this.position);\r\n        this.c.setFillStyle(this.theme.fillStyle);\r\n        this.c.drawImage(this.svgImg, 0, 0, this.width, this.height);\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    static get add() {\r\n        return new MaterialIcons(\"add\");\r\n    }\r\n\r\n    static get close() {\r\n        return new MaterialIcons(\"close\");\r\n    }\r\n\r\n    static get done() {\r\n        return new MaterialIcons(\"done\");\r\n    }\r\n\r\n    static get edit() {\r\n        return new MaterialIcons(\"edit\");\r\n    }\r\n\r\n    static get menu() {\r\n        return new MaterialIcons(\"menu\");\r\n    }\r\n\r\n    static get more_vert() {\r\n        return new MaterialIcons(\"more_vert\");\r\n    }\r\n\r\n    static get search() {\r\n        return new MaterialIcons(\"search\");\r\n    }\r\n\r\n    static get remove() {\r\n        return new MaterialIcons(\"remove\");\r\n    }\r\n\r\n    static get settings() {\r\n        return new MaterialIcons(\"settings\");\r\n    }\r\n\r\n    static get arrow_back() {\r\n        return new MaterialIcons(\"arrow_back\");\r\n    }\r\n\r\n    static get arrow_forward() {\r\n        return new MaterialIcons(\"arrow_forward\");\r\n    }\r\n    static get undo() {\r\n        return new MaterialIcons(\"undo\");\r\n    }\r\n    static get redo() {\r\n        return new MaterialIcons(\"redo\");\r\n    }\r\n    static get save() {\r\n        return new MaterialIcons(\"save\");\r\n    }\r\n    static get delete() {\r\n        return new MaterialIcons(\"delete\");\r\n    }\r\n    static get add_circle() {\r\n        return new MaterialIcons(\"add_circle\");\r\n    }\r\n    static get remove_circle() {\r\n        return new MaterialIcons(\"remove_circle\");\r\n    }\r\n    static get pencil() {\r\n        return MaterialIcons.edit;\r\n    }\r\n    static get clear() {\r\n        return new MaterialIcons(\"clear\");\r\n    }\r\n    static get check() {\r\n        return new MaterialIcons(\"check\");\r\n    }\r\n    static get check_circle() {\r\n        return new MaterialIcons(\"check_circle\");\r\n    }\r\n    static get cancel() {\r\n        return new MaterialIcons(\"cancel\");\r\n    }\r\n    static get move() {\r\n        return MaterialIcons.open_with;\r\n    }\r\n    static get open_with() {\r\n        return new MaterialIcons(\"open_with\");\r\n    }\r\n    static get zoom_in() {\r\n        return new MaterialIcons(\"zoom_in\");\r\n    }\r\n    static get zoom_out() {\r\n        return new MaterialIcons(\"zoom_out\");\r\n    }\r\n    static get play_arrow() {\r\n        return new MaterialIcons(\"play_arrow\");\r\n    }\r\n}\r\n", "import {CircleElement} from \"./CircleElement\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\nimport {PointerPoint} from \"../Datatypes/PointerPoint\";\r\n\r\nexport class DraggableCircle extends CircleElement implements IPoint2D {\r\n    _isDragging: boolean = false;\r\n    _dragStartPoint: Point2D | null = null;\r\n    _dragStartPos: Point2D | null = null;\r\n\r\n    get x(): number {\r\n        return this.centerPoint.x;\r\n    }\r\n    // set x(x: number) {\r\n    //     this.setPosFromXY(x, this.y);\r\n    // }\r\n    get y(): number {\r\n        return this.centerPoint.y;\r\n    }\r\n    // set y(y: number) {\r\n    //     this.setPosFromXY(this.x, y);\r\n    // }\r\n\r\n    onCreate() {\r\n        super.onCreate();\r\n        this.setSizeFromXY(20, 20);\r\n    }\r\n\r\n\r\n    get isDragging(): boolean {\r\n        return this._isDragging;\r\n    }\r\n\r\n    onDown(point: PointerPoint): void {\r\n        super.onDown(point);\r\n        this._isDragging = true;\r\n        this._dragStartPoint = point;\r\n        this._dragStartPos = this.position;\r\n    }\r\n\r\n    onUp(point: PointerPoint): void {\r\n        super.onUp(point);\r\n        this._isDragging = false;\r\n        this._dragStartPoint = null;\r\n        this._dragStartPos = null;\r\n    }\r\n\r\n    onMove(point: PointerPoint): void {\r\n        super.onMove(point);\r\n\r\n    }\r\n\r\n    onParentMove(point: PointerPoint) {\r\n        super.onParentMove(point);\r\n        if (this._isDragging) {\r\n            if (this._dragStartPoint !== null && this._dragStartPos !== null) {\r\n                let diff = point.sub(this._dragStartPoint);\r\n                this.position = this._dragStartPos.add(diff);\r\n            }\r\n        }\r\n    }\r\n}\r\n", "export class IJMatrix {\r\n    arr: number[][];\r\n\r\n    constructor(rows: number, cols: number) {\r\n        this.arr = [];\r\n        for (let i = 0; i < rows; i++) {\r\n            this.arr.push([]);\r\n            for (let j = 0; j < cols; j++) {\r\n                this.arr[i].push(0);\r\n            }\r\n        }\r\n    }\r\n\r\n    setIJ(i: number, j: number, value: number) {\r\n        this.arr[i][j] = value;\r\n        return this;\r\n    }\r\n\r\n    getIJ(i: number, j: number):number {\r\n        return this.arr[i][j];\r\n\r\n    }\r\n\r\n    set(arr: number[]) {\r\n        let i = 0;\r\n        for (let row of this.arr) {\r\n            for (let j = 0; j < row.length; j++) {\r\n                row[j] = arr[i];\r\n                i++;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    setFrom2DArray(arr: number[][]) {\r\n        this.arr = arr;\r\n        return this;\r\n    }\r\n\r\n    multiply(other: IJMatrix) {\r\n        let result = new IJMatrix(this.arr.length, other.arr[0].length);\r\n        for (let i = 0; i < this.arr.length; i++) {\r\n            for (let j = 0; j < other.arr[0].length; j++) {\r\n                for (let k = 0; k < this.arr[0].length; k++) {\r\n                    result.arr[i][j] += this.arr[i][k] * other.arr[k][j];\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n", "import {IJMatrix} from \"../../Utils/Math/NNMatrix\";\r\n\r\nexport function cubic(cubicFunctionBasis: (n: number) => IJMatrix, pointMatrix: IJMatrix, t: number) {\r\n    let b = cubicFunctionBasis(t);\r\n    let result = new IJMatrix(1, 2);\r\n    for (let i = 0; i < 4; i++) {\r\n        result.setIJ(0, 0, result.getIJ(0, 0) + pointMatrix.getIJ(i, 0) * b.getIJ(0, i));\r\n        result.setIJ(0, 1, result.getIJ(0, 1) + pointMatrix.getIJ(i, 1) * b.getIJ(0, i));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function hermite(t: number) {\r\n    return new IJMatrix(1, 4)\r\n        .set([2 * t * t * t - 3 * t * t + 1,\r\n            t * t * t - 2 * t * t + t,\r\n            -2 * t * t * t + 3 * t * t,\r\n            t * t * t - t * t]\r\n        );\r\n}\r\n\r\nexport function bezier(t: number) {\r\n    return new IJMatrix(1, 4)\r\n        .set([Math.pow(1 - t, 3),\r\n            3 * t * Math.pow(1 - t, 2),\r\n            3 * Math.pow(t, 2) * (1 - t),\r\n            Math.pow(t, 3)]\r\n        );\r\n}\r\n\r\nexport function bSpline(t: number) {\r\n    return new IJMatrix(1, 4)\r\n        .set([Math.pow(1 - t, 3) / 6,\r\n            (3 * t * t * t - 6 * t * t + 4) / 6,\r\n            (-3 * t * t * t + 3 * t * t + 3 * t + 1) / 6,\r\n            t * t * t / 6]\r\n        );\r\n}\r\n\r\n\r\nexport function dHermite(t: number) {\r\n    return new IJMatrix(1, 4)\r\n        .set(\r\n            [\r\n                6 * t ** 2 - 6 * t,\r\n                3 * t ** 2 - 4 * t + 1,\r\n                -6 * t ** 2 + 6 * t,\r\n                3 * t ** 2 - 2 * t\r\n            ]\r\n        );\r\n}\r\n", "import {PointerInteractThemeElement} from \"./Basic/PointerInteractThemeElement\";\r\nimport {CubismElement} from \"./Basic/CubismElement\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\nimport {cubic, dHermite, hermite} from \"../Curve/Curve2D/Cubic\";\r\nimport {IJMatrix} from \"../Utils/Math/NNMatrix\";\r\nimport PointerHandlerParentElement from \"./Basic/PointerHanderParentElement\";\r\nimport {DraggableCircle} from \"./DraggableCircle\";\r\n\r\nexport class CurveElement extends CubismElement {\r\n    _points: IPoint2D[];\r\n\r\n    constructor(id: string | null = null, points: IPoint2D[] = []) {\r\n        super(id);\r\n        this._points = points;\r\n    }\r\n\r\n    get points() {\r\n        return this._points;\r\n    }\r\n\r\n\r\n    onCreate() {\r\n        super.onCreate();\r\n        this.width = 500;\r\n        this.height = 500;\r\n    }\r\n\r\n\r\n    draw() {\r\n        super.draw();\r\n\r\n        // let d0 = Point2D.getRandom(400);\r\n        // let d1 = Point2D.getRandom(400);\r\n\r\n        for (let p of this.points) {\r\n            this.c.drawPoint(p);\r\n        }\r\n\r\n        let step = 0.1;\r\n\r\n\r\n        let lastD = Point2D.zero;\r\n\r\n        for (let i = 0; i < this.points.length - 1; i++) {\r\n            let p0 = Point2D.fromIPoint(this.points[i]);\r\n            let p1 = Point2D.fromIPoint(this.points[i + 1]);\r\n            let t = 0;\r\n            let lastPoint: IPoint2D = p0;\r\n\r\n            let d0 = lastD;\r\n            let d1 = null;\r\n            if (i < this.points.length - 2) {\r\n                let p2 = Point2D.fromIPoint(this.points[i + 2]);\r\n                d1 = p2.sub(p0).scale(0.5);\r\n            } else {\r\n                d1 = p1.sub(p0).scale(0.5);\r\n            }\r\n\r\n            if (i > 0) {\r\n                let tangent = this.getTangent(t, p0, p1, d0, d1);\r\n                // console.log(`tangent [${i}]: ${tangent.x}, ${tangent.y}`);\r\n                let rotation = - Math.atan2(tangent.y, tangent.x);\r\n                this.c.offsetXY(100, 100);\r\n                // this.c.drawPoint(tangent);\r\n                this.c.restoreTranslate();\r\n                this.c.drawArrow(Point2D.fromIPoint(this.points[i]), rotation, 30);\r\n            }\r\n\r\n            while (t < 1) {\r\n                let point = this.getPoint(t, p0, p1, d0, d1);\r\n                // this.c.drawPoint(point, 3);\r\n                this.c.drawLineWithPoints(lastPoint, point);\r\n                lastPoint = point;\r\n                t += step;\r\n            }\r\n            lastD = d1;\r\n        }\r\n    }\r\n\r\n    getTangent(t: number, p0: IPoint2D, p1: IPoint2D, d0: IPoint2D, d1: IPoint2D): Point2D {\r\n        let pointMatrix = new IJMatrix(4, 2)\r\n            .set([\r\n                p0.x, p0.y,\r\n                d0.x, d0.y,\r\n                p1.x, p1.y,\r\n                d1.x, d1.y\r\n            ]);\r\n        let out = cubic(dHermite, pointMatrix, t);\r\n        return new Point2D(out.getIJ(0, 0), out.getIJ(0, 1));\r\n    }\r\n\r\n    getPoint(t: number, p0: IPoint2D, p1: IPoint2D, d0: IPoint2D, d1: IPoint2D): IPoint2D {\r\n        let pointMatrix = new IJMatrix(4, 2)\r\n            .set([\r\n                p0.x, p0.y,\r\n                d0.x, d0.y,\r\n                p1.x, p1.y,\r\n                d1.x, d1.y\r\n            ]);\r\n        let out = cubic(hermite, pointMatrix, t);\r\n        return new Point2D(out.getIJ(0, 0), out.getIJ(0, 1));\r\n    }\r\n}\r\n", "import IAnimation from \"./IAnimation\";\r\nimport {CubismElement} from \"../Elements/Basic/CubismElement\";\r\nimport {EventKeys} from \"../Constants/EventKeys\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\nimport CubismPart from \"../CubismPart\";\r\nimport {Cubism} from \"../Cubism\";\r\n\r\nexport class CubismAnimation extends CubismPart implements IAnimation {\r\n    _isPlaying: boolean = false;\r\n    _endFrame: number;\r\n    _currFrame: number = 0;\r\n\r\n    _animationCallBacks: ((frame: number) => void)[] = [];\r\n\r\n    constructor(cubism:Cubism, endFrame: number = 0) {\r\n        super();\r\n        this.setCubism(cubism);\r\n        this._endFrame = endFrame;\r\n    }\r\n\r\n    setPlaying(playing: boolean): this {\r\n        this._isPlaying = playing;\r\n        if (playing) {\r\n            this.cubism.initializer.initializeAlwaysRedraw();\r\n            this.cubism.eventSystem.registerEvent(EventKeys.FRAME_UPDATE, this.play.bind(this));\r\n        }\r\n        return this;\r\n    }\r\n\r\n    setAnimationEvent(callback: (frame: number) => void) {\r\n        this._animationCallBacks.push(callback);\r\n    }\r\n\r\n    onAnimationUpdate() {\r\n        for (const callback of this._animationCallBacks) {\r\n            callback(this._currFrame);\r\n        }\r\n    }\r\n\r\n    play(): void {\r\n        // console.log(\"Playing animation\");\r\n        // console.log(`Current frame: ${this._currFrame}`);\r\n        this.onAnimationUpdate();\r\n        this._currFrame++;\r\n\r\n        if (this._currFrame > this._endFrame) {\r\n            this._isPlaying = false;\r\n            this._currFrame = 0;\r\n\r\n            this.cubism.initializer.stopAlwaysRedraw();\r\n        }\r\n    }\r\n}\r\n", "import PointerHandlerParentElement from \"../Basic/PointerHanderParentElement\";\r\nimport {PointerPoint} from \"../../Datatypes/PointerPoint\";\r\nimport {Point2D} from \"../../Utils/Math/Point\";\r\nimport {IJMatrix} from \"../../Utils/Math/NNMatrix\";\r\nimport {cubic, dHermite, hermite} from \"../../Curve/Curve2D/Cubic\";\r\nimport {Colors} from \"../../Constants/Colors\";\r\nimport {CubismAnimation} from \"../../Animation/Animation\";\r\n\r\nexport class CurveCanvas extends PointerHandlerParentElement {\r\n    _curves: IPoint2D[][] = [];\r\n    _drawing: boolean = false;\r\n\r\n    _isPlayingAnimation: boolean = false;\r\n    animationLength: number = 100;\r\n\r\n    circleSize = 10;\r\n\r\n    mode = {\r\n        draw: 0,\r\n        move: 1\r\n    }\r\n\r\n    _currMode: number = this.mode.draw;\r\n\r\n    set currMode(mode: number) {\r\n        console.log(\"Setting mode to: \", mode);\r\n\r\n        this._currMode = mode;\r\n    }\r\n\r\n    get currMode() {\r\n        return this._currMode;\r\n    }\r\n\r\n    set drawing(drawing: boolean) {\r\n        this._drawing = drawing;\r\n    }\r\n\r\n    changeToMoveMode() {\r\n        this.currMode = this.mode.move;\r\n    }\r\n\r\n    changeToDrawMode() {\r\n        this.currMode = this.mode.draw;\r\n    }\r\n\r\n    get drawing(): boolean {\r\n        return this._drawing;\r\n    }\r\n\r\n    onDown(point: PointerPoint) {\r\n        super.onDown(point);\r\n        this.drawing = true;\r\n        if (this._currMode === this.mode.draw) {\r\n            this._curves.push([point.sub(this.position)]);\r\n        }\r\n    }\r\n\r\n    onUp(point: PointerPoint) {\r\n        super.onUp(point);\r\n        this.drawing = false;\r\n    }\r\n\r\n    playAnimation() {\r\n        console.log(\"Playing animation\");\r\n        if (this._isPlayingAnimation) {\r\n            return;\r\n        }\r\n        if (this._curves.length === 0) {\r\n            return;\r\n        }\r\n        let animation = new CubismAnimation(this.cubism, this.animationLength);\r\n        this._isPlayingAnimation = true;\r\n        animation.setAnimationEvent(this.animationCallback.bind(this));\r\n        animation.setPlaying(true);\r\n        this.c.setRedraw(true);\r\n    }\r\n\r\n    animationCallback(t: number) {\r\n        // console.log(\"Animation callback: \", t);\r\n        if (t === this.animationLength) {\r\n            this._isPlayingAnimation = false;\r\n            return;\r\n        }\r\n        let ratio = t / this.animationLength;\r\n\r\n        if (this._curves.length === 0) {\r\n            console.log(\"No curves\");\r\n            return;\r\n        }\r\n        this.c.offset(this.position);\r\n        for (let i = 0; i < this._curves.length; i++) {\r\n            let curve = this._curves[i];\r\n            this.drawHermitCurve(curve, ratio);\r\n        }\r\n\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    onMove(point: PointerPoint) {\r\n        super.onMove(point);\r\n        // console.log(\"Drawing: \", this.drawing);\r\n        let relaPoint = point.sub(this.position);\r\n        if (this.drawing) {\r\n            if (this._currMode === this.mode.draw) {\r\n                let lastCurve = this._curves[this._curves.length - 1];\r\n                let lastPoint = lastCurve[lastCurve.length - 1];\r\n                if (Point2D.fromIPoint(lastPoint).manhattanDistance(relaPoint) > 80) {\r\n                    lastCurve.push(relaPoint);\r\n                }\r\n            }\r\n            if (this._currMode === this.mode.move) {\r\n                let dragPoint = null;\r\n                for (let curve of this._curves) {\r\n                    for (let point of curve) {\r\n                        if (Point2D.fromIPoint(point).euclideanDistance(relaPoint) < this.circleSize) {\r\n                            dragPoint = point;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (dragPoint !== null) {\r\n                    dragPoint.x = relaPoint.x;\r\n                    dragPoint.y = relaPoint.y;\r\n                }\r\n            }\r\n        }\r\n        this.c.setRedraw(true);\r\n    }\r\n\r\n    undo() {\r\n        if (this._curves.length > 0) {\r\n            this._curves.pop();\r\n            console.log(this._curves);\r\n            console.log(\"Undoing\");\r\n        }\r\n        this.c.setRedraw(true);\r\n    }\r\n    clear() {\r\n        while (this._curves.length > 0) {\r\n            this.undo();\r\n        }\r\n        this.c.setRedraw(true);\r\n    }\r\n\r\n    draw() {\r\n\r\n        // console.log(\"Drawing curves: \", this._curves);\r\n        super.draw();\r\n        if (this._isPlayingAnimation) {\r\n            // console.log(\"Is playing\");\r\n            return;\r\n        }\r\n\r\n        this.c.offset(this.position);\r\n        // this.c.setFillStyle(\"black\");\r\n        this.c.setStrokeStyle(Colors.white);\r\n        this.c.setFillStyle(Colors.white);\r\n        this.c.drawRect(0, 0, this.size.x, this.size.y);\r\n        this.c.setStrokeStyle(Colors.black);\r\n        if (this.currMode === this.mode.move) {\r\n            this.c.setStrokeStyle(Colors.blue700);\r\n            this.c.setStrokeWidth(3);\r\n        }\r\n        if (this.currMode === this.mode.draw) {\r\n            this.c.setStrokeWidth(10);\r\n        }\r\n        for (let curve of this._curves) {\r\n            this.drawHermitCurve(curve);\r\n\r\n            if (this._currMode === this.mode.move) {\r\n                for (let point of curve) {\r\n                    this.c.drawPoint(point, this.circleSize);\r\n                }\r\n            }\r\n        }\r\n        this.c.restoreTranslate();\r\n    }\r\n\r\n    drawHermitCurve(points: IPoint2D[], ratio: number = 1) {\r\n        let step = 0.01;\r\n        let lastD = Point2D.zero;\r\n        let fullEnd = points.length;\r\n        let end = Math.floor(fullEnd * ratio);\r\n\r\n        for (let i = 0; i < end - 1; i++) {\r\n            let p0 = Point2D.fromIPoint(points[i]);\r\n            let p1 = Point2D.fromIPoint(points[i + 1]);\r\n            let t = 0;\r\n            let lastPoint: IPoint2D = p0;\r\n            let d0 = lastD;\r\n            let d1 = null;\r\n            if (i < end - 2) {\r\n                let p2 = Point2D.fromIPoint(points[i + 2]);\r\n                d1 = p2.sub(p0).scale(0.5);\r\n            } else {\r\n                d1 = p1.sub(p0).scale(0.5);\r\n            }\r\n            let segEnd = 1;\r\n            let isEdge = false;\r\n            if (this._isPlayingAnimation){\r\n                if (i === end - 2) {\r\n                    isEdge = true;\r\n                    segEnd = fullEnd * ratio - end;\r\n                }\r\n            }\r\n\r\n            while (t <= segEnd) {\r\n                let point = this.getPoint(t, p0, p1, d0, d1);\r\n                if (this._isPlayingAnimation){\r\n                    this.c.setStrokeWidth(10);\r\n                    let currColor = `hsl(${100}, ${10}%, ${(1-ratio)*100}%)`;\r\n                    this.c.setStrokeStyle(currColor);\r\n                }\r\n                this.c.drawLineWithPoints(lastPoint, point);\r\n                lastPoint = point;\r\n                t += step;\r\n            }\r\n            if (this._isPlayingAnimation){\r\n                let point = this.getPoint(t, p0, p1, d0, d1);\r\n                if (isEdge){\r\n                    let tangent = this.getTangent(t, p0, p1, d0, d1);\r\n                    this.c.setStrokeWidth(20);\r\n                    let endPoint = point.sub(tangent.identity().scale(20));\r\n                    this.c.drawLineWithPoints(point, endPoint);\r\n                }\r\n            }\r\n            lastD = d1;\r\n        }\r\n    }\r\n\r\n\r\n    getTangent(t: number, p0: IPoint2D, p1: IPoint2D, d0: IPoint2D, d1: IPoint2D): Point2D {\r\n        let pointMatrix = new IJMatrix(4, 2)\r\n            .set([\r\n                p0.x, p0.y,\r\n                d0.x, d0.y,\r\n                p1.x, p1.y,\r\n                d1.x, d1.y\r\n            ]);\r\n        let out = cubic(dHermite, pointMatrix, t);\r\n        return new Point2D(out.getIJ(0, 0), out.getIJ(0, 1));\r\n    }\r\n\r\n    getPoint(t: number, p0: IPoint2D, p1: IPoint2D, d0: IPoint2D, d1: IPoint2D): Point2D {\r\n        let pointMatrix = new IJMatrix(4, 2)\r\n            .set([\r\n                p0.x, p0.y,\r\n                d0.x, d0.y,\r\n                p1.x, p1.y,\r\n                d1.x, d1.y\r\n            ]);\r\n        let out = cubic(hermite, pointMatrix, t);\r\n        return new Point2D(out.getIJ(0, 0), out.getIJ(0, 1));\r\n    }\r\n\r\n}\r\n", "import {Cubism} from \"../Cubism\";\r\nimport {initConsole} from \"../Utils/Debug/DebugConsole\";\r\nimport PointerHandlerParentElement from \"../Elements/Basic/PointerHanderParentElement\";\r\nimport RecursiveRect from \"../Elements/Fancy/RecursiveRect\";\r\nimport {ChangingRainbowBackground} from \"../Elements/Fancy/ChangingRainbowBackground\";\r\nimport {Point2D} from \"../Utils/Math/Point\";\r\nimport {demoFunction} from \"./DemoDecorators\";\r\nimport {EventKeys} from \"../Constants/EventKeys\";\r\nimport SizeKeys from \"../Constants/SizeKeys\";\r\nimport CanvasRecorder from \"./CanvasRecorder\";\r\nimport {PointerInteractThemeElement} from \"../Elements/Basic/PointerInteractThemeElement\";\r\nimport {VerticalLayout} from \"../Elements/Layouts/VerticalLayout\";\r\nimport {RectElement} from \"../Elements/RectElement\";\r\nimport {CircleElement} from \"../Elements/CircleElement\";\r\nimport {HorizontalLayout} from \"../Elements/Layouts/HorizontalLayout\";\r\nimport {Background} from \"../Elements/Background\";\r\nimport {Colors} from \"../Constants/Colors\";\r\nimport {ButtonElement} from \"../Elements/ButtonElement\";\r\nimport {CloseIcon} from \"../Elements/Icons/CloseIcon\";\r\nimport {AddIcon} from \"../Elements/Icons/AddIcon\";\r\nimport {OkIcon} from \"../Elements/Icons/OkIcon\";\r\nimport {ZoomInIcon} from \"../Elements/Icons/ZoomInIcon\";\r\nimport {UnknownIcon} from \"../Elements/Icons/UnknownIcon\";\r\nimport {CubismElement} from \"../Elements/Basic/CubismElement\";\r\nimport {WebSvgIcon} from \"../Elements/Icons/SVGIcon\";\r\nimport {MaterialIcons} from \"../Elements/Icons/MaterialIcons\";\r\nimport {DraggableCircle} from \"../Elements/DraggableCircle\";\r\nimport {CurveElement} from \"../Elements/CurveElement\";\r\nimport {CurveCanvas} from \"../Elements/Fancy/CurveCanvas\";\r\nimport {CubismAnimation} from \"../Animation/Animation\";\r\n\r\nconsole.log(\"loading DemoFunctions.ts ...\");\r\n\r\nclass DemoFunctions {\r\n    @demoFunction()\r\n    testFunction() {\r\n        console.log(\"demoFunction\");\r\n        console.log();\r\n    }\r\n\r\n    @demoFunction(\"This is a demo function\")\r\n    staticRecursiveRect() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        app.init(\r\n            new PointerHandlerParentElement(\r\n                null,\r\n                new ChangingRainbowBackground()\r\n                    .setSizeFromXY(SizeKeys\r\n                        .MATCH_PARENT, SizeKeys.MATCH_PARENT)\r\n                    .setLightness(70).setSaturation(80)\r\n                    .setChangingSpeed(0.1)\r\n                ,\r\n                new RecursiveRect()\r\n                    .setWiggleStrength(2)\r\n                    .setSizeFromXY(200, 200)\r\n                    .setPosFromXY(100, 100)\r\n                    .setRelativePosition(new Point2D(100, 100))\r\n                    .setRecursionCount(20)\r\n            )\r\n        )\r\n    }\r\n\r\n    @demoFunction(\r\n        \"This is an animated recursive rectangle.\",\r\n        \"Try to drag it around and see what happens.\"\r\n    )\r\n    animatedRecursiveRect() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n\r\n        app.init(\r\n            new PointerHandlerParentElement(\r\n                null,\r\n                new ChangingRainbowBackground()\r\n                    .setSizeFromXY(SizeKeys.MATCH_PARENT, SizeKeys.MATCH_PARENT)\r\n                    .setLightness(70).setSaturation(80)\r\n                    .setChangingSpeed(0.1)\r\n                ,\r\n                new RecursiveRect()\r\n                    .setWiggleStrength(2)\r\n                    .setSizeFromXY(200, 200)\r\n                    .setPosFromXY(100, 100)\r\n                    .setRelativePosition(new Point2D(100, 100))\r\n                    .setRecursionCount(10)\r\n            ).setId(\"parent\")\r\n        )\r\n\r\n        app.eventSystem.registerEvent(EventKeys.FPS_UPDATE, (fps: number) => {\r\n            if (document.getElementById(\"fps\") === null) {\r\n                let fpsCounter = document.createElement(\"div\");\r\n                fpsCounter.id = \"fps\";\r\n                document.getElementById(\"controlDiv\")?.appendChild(fpsCounter);\r\n            }\r\n            document.getElementById(\"fps\")!.innerHTML = \"FPS: \" + fps;\r\n            //\r\n            // StaticDemo.i.controlDiv.appendChild(fpsCounter);\r\n            // fpsCounter.innerText = `FPS: ${fps}`;\r\n            // console.log(fps);\r\n        });\r\n        app.initializer.initializeAlwaysRedraw(); // Redraw every frame, by default it only redraws when the elements change\r\n        app.initializer.initializeFPSCounter(); // Show FPS\r\n    }\r\n\r\n\r\n    // @demoFunction(\"Demo function for events\")\r\n    eventDemo() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        app.init(\r\n            new PointerHandlerParentElement(\r\n                null,\r\n                new CircleElement()\r\n                    .setWidth(200).setHeight(200)\r\n                    .setPosFromXY(100, 100)\r\n            )\r\n        )\r\n        app.initializer.initializeFPSCounter();\r\n        app.eventSystem.registerEvent(EventKeys.FPS_UPDATE, (fps: number) => {\r\n            if (document.getElementById(\"fps\") === null) {\r\n                let fpsCounter = document.createElement(\"div\");\r\n                fpsCounter.id = \"fps\";\r\n                document.getElementById(\"controlDiv\")?.appendChild(fpsCounter);\r\n            }\r\n            document.getElementById(\"fps\")!.innerHTML = \"FPS: \" + fps;\r\n        });\r\n        app.initializer.initializeDrawsPerSecondCounter();\r\n        app.eventSystem.registerEvent(EventKeys.DRAW_COUNT_UPDATE, (draws: number) => {\r\n            // console.log(draws);\r\n            if (document.getElementById(\"draws\") === null) {\r\n                let drawsCounter = document.createElement(\"div\");\r\n                drawsCounter.id = \"draws\";\r\n                document.getElementById(\"controlDiv\")?.appendChild(drawsCounter);\r\n            }\r\n            document.getElementById(\"draws\")!.innerHTML = \"DFS(Draws per second): \" + draws;\r\n        });\r\n    }\r\n\r\n\r\n    @demoFunction(\"Demo function for theme changing\")\r\n    themedElements() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        app.init(\r\n            new PointerHandlerParentElement(\r\n                \"PointerHandlerParentElement\",\r\n                new Background().setColor(Colors.blue700),\r\n                new VerticalLayout(\"Outer Vertical Layout\",\r\n                    new RectElement()\r\n                        .setWidth(100).setHeight(50),\r\n                    new CircleElement()\r\n                        .setWidth(100).setHeight(100),\r\n                    new HorizontalLayout(\r\n                        \"Inner Horizontal Layout\",\r\n                        new RectElement()\r\n                            .setWidth(100).setHeight(100),\r\n                        new RectElement()\r\n                            .setWidth(100).setHeight(100),\r\n                        new CircleElement()\r\n                            .setWidth(100).setHeight(100),\r\n                    )\r\n                ).setPosFromXY(50, 75)\r\n            ).setPosFromXY(0, 0)\r\n        )\r\n    }\r\n\r\n    @demoFunction()\r\n    buttonAndLayoutDemo() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n\r\n        let verticalLayout = new VerticalLayout(\"Add Button Vertical Layout\");\r\n\r\n        let itemList: CubismElement[] = [];\r\n        let horizontalLayout = new HorizontalLayout(\"Horizontal Layout\",\r\n            new ButtonElement(\"AddBtn\").setWidth(100).setHeight(50)\r\n                .setIcon(new AddIcon()).setText(\"Add\")\r\n                .setOnClick(() => {\r\n                    console.log(\"Add button clicked\");\r\n                    let item = new ButtonElement().setWidth(250).setHeight(50).setText(`Item ${itemList.length + 1}`);\r\n                    itemList.push(item);\r\n                    verticalLayout.addChildren(item);\r\n                }),\r\n            new ButtonElement(\"RemoveBtn\").setWidth(150).setHeight(50)\r\n                .setIcon(new CloseIcon()).setText(\"Remove\")\r\n\r\n                .setOnClick(() => {\r\n                        console.log(\"Remove button clicked\");\r\n                        if (itemList.length > 0) {\r\n                            verticalLayout.removeChild(itemList.pop() as CubismElement);\r\n                        }\r\n                    }\r\n                )\r\n        );\r\n        app.init(\r\n            new VerticalLayout(null,\r\n                horizontalLayout, verticalLayout\r\n            ).setPosFromXY(75, 25)\r\n        )\r\n    }\r\n\r\n    @demoFunction()\r\n    SvgTest() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        app.init(\r\n            new VerticalLayout(\r\n                \"SVG Test\",\r\n                new ButtonElement().setWidth(120).setHeight(50).setIcon(MaterialIcons.add).setText(\"Add\"),\r\n                new ButtonElement().setWidth(120).setHeight(50).setIcon(MaterialIcons.arrow_back).setText(\"arrow_back\"),\r\n                new ButtonElement().setWidth(120).setHeight(50).setIcon(MaterialIcons.edit).setText(\"Edit\"),\r\n                new ButtonElement().setWidth(120).setHeight(50).setIcon(MaterialIcons.search).setText(\"Search\"),\r\n            )\r\n        )\r\n    }\r\n\r\n    @demoFunction()\r\n    CurveDemo() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        app.width = 500;\r\n        app.height = 500;\r\n\r\n        let points: DraggableCircle[] = [];\r\n\r\n\r\n        let root = new PointerHandlerParentElement(\"Root\")\r\n\r\n        function addPoint() {\r\n            let point = new DraggableCircle()\r\n                .setPosFromPoint(Point2D.getRandom(100, 400));\r\n            points.push(point);\r\n            root.addChildren(point);\r\n        }\r\n\r\n        function removePoint() {\r\n            if (points.length > 0) {\r\n                root.removeChild(points.pop() as CubismElement);\r\n            }\r\n        }\r\n\r\n        root.addChildren(\r\n            new Background().setColor(Colors.white),\r\n            // new DraggableCircle().setSizeFromXY(10, 10).setPosFromXY(100, 100),ss\r\n            new CurveElement(null, points),\r\n            new ButtonElement().setWidth(150).setHeight(50).setIcon(MaterialIcons.add).setText(\"Add Point\").setPosFromXY(0, 450)\r\n                .setOnClick(() => {\r\n                    addPoint();\r\n                }),\r\n            new ButtonElement().setWidth(190).setHeight(50).setIcon(MaterialIcons.remove).setText(\"Remove Point\").setPosFromXY(150, 450)\r\n                .setOnClick(() => {\r\n                    removePoint();\r\n                })\r\n        )\r\n\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n            addPoint();\r\n        }\r\n\r\n        app.init(root)\r\n    }\r\n\r\n    @demoFunction()\r\n    curveCanvas() {\r\n        let app = Cubism.createFromId(\"mainCanvas\");\r\n        let width = 500;\r\n        let height = 500;\r\n        app.width = width;\r\n        app.height = height;\r\n\r\n        let curveCanvas = new CurveCanvas().setWidth(width).setHeight(height).setPosFromXY(0, 50);\r\n\r\n\r\n        let modeBtn = new ButtonElement().setWidth(200).setHeight(50).setIcon(MaterialIcons.pencil).setText(\"Drawing Mode\").setPosFromXY(0, 0)\r\n            .setOnClick(() => {\r\n                console.log(`Current mode: ${curveCanvas._currMode}`);\r\n                if (curveCanvas._currMode === curveCanvas.mode.draw) {\r\n                    console.log(\"curveCanvas._currMode === curveCanvas.mode.draw\")\r\n                }\r\n                if (curveCanvas._currMode === curveCanvas.mode.move) {\r\n                    console.log(\"curveCanvas._currMode === curveCanvas.mode.move\")\r\n                }\r\n                if (curveCanvas._currMode === curveCanvas.mode.draw) {\r\n                    modeBtn.setIcon(MaterialIcons.move);\r\n                    modeBtn.setText(\"Move Mode\");\r\n                    curveCanvas.changeToMoveMode()\r\n                } else {\r\n                    console.log(\"Switching to drawing mode\");\r\n                    modeBtn.setIcon(MaterialIcons.pencil);\r\n                    modeBtn.setText(\"Drawing Mode\");\r\n                    curveCanvas.changeToDrawMode();\r\n                }\r\n            })\r\n\r\n        let undoBtn = new ButtonElement().setWidth(100).setHeight(50).setIcon(MaterialIcons.undo).setText(\"Undo\").setOnClick(() => {\r\n            console.log(\"Undo\");\r\n            curveCanvas.undo();\r\n        }).setPosFromXY(200, 0);\r\n        let playBtn = new ButtonElement().setWidth(100).setHeight(50).setIcon(MaterialIcons.play_arrow).setText(\"Play\").setOnClick(() => {\r\n            console.log(\"Play\");\r\n            curveCanvas.playAnimation();\r\n        }).setPosFromXY(300, 0);\r\n\r\n        let deleteBtn = new ButtonElement().setWidth(100).setHeight(50).setIcon(MaterialIcons.delete).setText(\"Clear\").setOnClick(() => {\r\n            console.log(\"Delete\");\r\n            curveCanvas.clear();\r\n        }).setPosFromXY(400, 0);\r\n\r\n        app.init(\r\n            new PointerHandlerParentElement(\r\n                \"SVG Test\",\r\n                // new CubismAnimation(100).setPlaying(true),\r\n                curveCanvas,\r\n                undoBtn,\r\n                modeBtn,\r\n                playBtn,\r\n                deleteBtn\r\n            )\r\n        )\r\n    }\r\n}\r\n\r\nfunction main() {\r\n    initConsole();\r\n\r\n}\r\n\r\nmain();\r\n"],
  "mappings": "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",
  "names": ["point"]
}
